{"version":3,"sources":["img/splash.GIF","airtable/airtable.tsx","airtable/config.ts","airtable/constants.ts","constants.tsx","components/Cover/Cover.tsx","components/Navbar/Navbar.tsx","icons.tsx","components/Rubric/Rubric.tsx","components/LevelBubble/LevelBubble.tsx","components/Profile/Profile.tsx","components/MarketCard/MarketCard.tsx","App.tsx","index.tsx"],"names":["module","exports","base","config","endpointUrl","apiKey","apikey","_config","find","recId","listName","a","Promise","resolve","reject","err","record","console","error","fields","recID","id","create","replace","field","options","cells","select","eachPage","records","fetchNextPage","map","el","push","tLOGS","tUSERS","R_VK_ID","RUBRICS","VK_GROUP_ID","AMOUNT_TO_NEW_USER","Cover","this","props","background","height","className","style","children","React","Component","Navar","go","dataTo","osname","platform","IOS","marginTop","left","onClick","data-to","star","fill","width","viewBox","xmlns","d","logo","fillRule","clipRule","Rubric","parseHistory","history","i","key","asideContent","rubric","description","iso","date","Date","month","getMonth","getDate","getFullYear","toLocaleTimeString","parseDate","h","filter","cellHistory","source","length","exp","reduce","current","next","title","Math","round","value","LevelBubble","action","Profile","fetchedUser","sprintData","rubrics","market","openSnackbar","snackbar","top","ANDROID","src","photo_200","size","href","target","rel","item","before","type","multiline","data-meta","JSON","stringify","display","paddingLeft","fontFamily","thumb_photo","MarketCard","price","url","owner_id","vertical","stretched","component","tp","locale","splashLoader","backgroundColor","splash","alt","App","getItems","setState","isLoading","state","authToken","callVKApi","access_token","then","res","response","items","catch","_","user","list","filterByFormula","first_name","last_name","promises","sort","direction","maxRecords","obj","e","execute","desc","slice","all","result","concat","apply","b","dateA","setLocation","route","connect","send","location","currentTarget","dataset","to","meta","parseMeta","parse","getWallPost","post","activeView","query","sendPromise","method","params","count","v","text","bind","openBase","onStoryChange","subscribe","detail","data","log","sl","toString","percent","layout","onClose","activeStory","story","Object","assign","activePanel","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.475827ca.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/splash.75e96a0e.GIF\";","\nimport * as air from 'airtable';\nimport { AIR_CONFIG } from './config';\n\nclass Airtable extends air {\n\n    private base\n    private _config: any\n\n    constructor(config: any) {\n        super({ endpointUrl: 'https://api.airtable.com', apiKey: config.apikey })\n        this.base = super.base(config.base)\n        this._config = config\n    }\n\n    list(listName: string, options?: { filterByFormula?: string, fields?: Array<string>, sort?: Array<{ field: string, direction: \"desc\" | \"asc\" }>, maxRecords?: number }): Promise<any[]> {\n        //sort: [{field: \"Имя\", direction: \"desc\" || \"asc\" }]\n        return new Promise<any[]>((resolve, reject) => {\n            let cells = []\n            // let opt = { filterByFormula: `{${key}} = \"${value}\"` } //TO-DO: обработу numbers и strings в значении value\n\n            this.base(listName).select(options ? options : {})\n                .eachPage(function page(records, fetchNextPage) {\n                    records\n                        // .filter(record => record.get(key) === value)\n                        .map(el => {\n                            el.fields.recID = el.id\n                            cells.push(el.fields)\n                            return el\n                        })\n\n                    // This function (`page`) will get called for each page of records.\n                    fetchNextPage()\n\n                }, function done(err) {\n                    if (err) { console.error(err); reject(err); return; }\n                    resolve(cells)\n                })\n\n        })\n\n    }\n\n\n    find = async (recId: string, listName: string) =>\n        new Promise<any>((resolve, reject) => {\n            this.base(listName).find(recId, function (err, record) {\n                if (err) { console.error(err); return; }\n                record.fields.recID = record.id\n                resolve(record.fields)\n            })\n        });\n\n    create = async (fields: any, listName: string) =>\n        new Promise<any>((resolve, reject) => {\n            this.base(listName).create(fields, function (err, record) {\n                if (err) { console.error(err); return; }\n                record.fields.recID = record.id\n                resolve(record.fields)\n            })\n        })\n\n    replace = (recID: string, field: any, listName: string) =>\n        new Promise(resolve => {\n\n            this.base(listName)\n                .replace(recID, field, (err, record) => {\n                    if (err) { console.error(err); return; }\n                    record.fields.recID = record.id\n                    resolve(record.fields)\n                })\n        })\n\n}\n\n\nexport const base = new Airtable(AIR_CONFIG);\n\n\n","//DEVELOPMENT\n// export const AIR_CONFIG = {\n//     apikey: 'keyCjoy0c7MaRyisi',\n//     base: 'appJJ0nmLtF6XYalJ',\n//     tLOGS: 'Начисления и списания',\n//     tUSERS: 'Участники'\n// }\n\n//PRODUCTION\nexport const AIR_CONFIG = {\n    apikey: 'keyCjoy0c7MaRyisi',\n    base: 'appEXq7BJ3ceoFRtr',\n    tLOGS: 'Начисления и списания',\n    tUSERS: 'Участники'\n}","export const L_MEMBERS = 'Участники';\nexport const R_VK_ID = 'VK-ID';\nexport const R_NAME = 'Имя';\nexport const R_VK_COMMENTID = 'VK-CommentID';\nexport const R_PROFILE = 'Профиль';\nexport const R_RATE = 'Баллы';\nexport const R_COMMENT = 'Комментарий';\nexport const L_RATE_WORKOUT = 'Начисления: разминки';\nexport const L_RATE_SPRINT = 'Начисления: спринты';\nexport const L_RATE_SPAS = 'Начисления: дизайнспас';\nexport const L_RATE_WITHDRAW = 'Покупки';\nexport const RUBRICS = [L_RATE_SPAS, L_RATE_WORKOUT, L_RATE_SPRINT, L_RATE_WITHDRAW]","export const AIRTABLE_APIKEY = 'keyCjoy0c7MaRyisi';\nexport const AIRTABLE_BASE = 'appEXq7BJ3ceoFRtr';\nexport const VK_APP_ID = 7215450;\nexport const VK_GROUP_ID = 120547095;\nexport const VK_ADMIN_ACCESS_TOKEN = '25bec7da203afb629e05ec40bb284d3f196a85c0a0539b7cb428717a6a24782f883bd139e721167c775f3';\nexport const VK_SERVISE_KEY = 'f60c2422f60c2422f60c242263f6623d78ff60cf60c2422abd8f8acb1ae9af95c999324'\n\n\nexport const AMOUNT_TO_NEW_USER = 25;","import React from 'react';\nimport { Div } from '@vkontakte/vkui'\nimport './Cover.css'\n\nexport default class Cover extends React.Component<any, any> {\n\n\n    render() {\n\n        const {\n            background,\n            height\n        } = this.props\n        return (\n            <Div className=\"cover\" style={{ height: height ? height : '134px', background: background ? background : 'linear-gradient(200.98deg, #485563 -13.11%, #29323C 75.28%)' }}>\n                {/* {(() => content)()} */}\n                <div className=\"coverContainer\">{this.props.children}</div>\n            </Div>\n        )\n    }\n}\n\n","import React from 'react'\nimport { PanelHeader, platform, IOS, HeaderButton } from \"@vkontakte/vkui\";\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\n\nexport default class Navar extends React.Component<any, any> {\n    render() {\n        let { go, dataTo } = this.props\n        const osname = platform();\n    \n        return (<PanelHeader className=\"navBar\" style={(() => osname === IOS ? {} : { marginTop: '81px' })()} left={<HeaderButton onClick={go} data-to={dataTo}>{osname === IOS ? <Icon28ChevronBack /> : <Icon24Back />}</HeaderButton>}>{this.props.children}</PanelHeader>)\n    }\n}","import React from 'react';\n\nexport const star = (fill: string) => <svg width=\"24\" height=\"22\" viewBox=\"0 0 24 22\" xmlns=\"http://www.w3.org/2000/svg\" fill={fill}>\n<path d=\"M12 0L14.8214 8.11672L23.4127 8.2918L16.5651 13.4833L19.0534 21.7082L12 16.8L4.94658 21.7082L7.43493 13.4833L0.587322 8.2918L9.17863 8.11672L12 0Z\" />\n</svg>;\n\nexport const logo = <svg width=\"25\" height=\"24\" viewBox=\"0 0 25 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M15.2 2.6636L7.93161 18.2513H11.033C12.0258 18.2513 12.012 19.799 10.9916 19.799H6.74475C6.12427 19.799 5.8485 19.1496 6.0829 18.6383C6.26215 18.2582 6.43796 17.8782 6.61376 17.4982C6.78956 17.1182 6.96537 16.7382 7.14462 16.3581C9.61277 11.024 12.0671 5.70377 14.5215 0.383494L14.5215 0.383475C14.7559 -0.127825 15.6246 -0.127825 15.859 0.383475C16.0382 0.763482 16.214 1.14349 16.3898 1.5235C16.5656 1.90353 16.7414 2.28356 16.9207 2.6636C18.5971 6.29748 20.2799 9.93137 21.9648 13.5697C22.7467 15.2581 23.529 16.9475 24.3114 18.6383C24.5596 19.1496 24.27 19.799 23.6495 19.799H16.0244V23.2538C16.0244 24.2487 14.4801 24.2487 14.4801 23.2538V19.0252C14.4801 18.6106 14.8386 18.2513 15.2523 18.2513H22.4614L15.2 2.6636ZM24.4 1.4C24.4 0.626843 23.7731 1.11759e-08 23 1.11759e-08C22.2268 1.11759e-08 21.6 0.626843 21.6 1.4C21.6 2.17316 22.2268 2.8 23 2.8C23.7731 2.8 24.4 2.17316 24.4 1.4Z\" fill=\"white\" />\n</svg>","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Panel, Div, Group, List, Cell, InfoRow, Progress } from '@vkontakte/vkui';\n\n\nimport \"./Rubric.css\";\nimport Cover from '../Cover/Cover';\nimport ReactMarkdown from 'react-markdown';\n// import connect from '@vkontakte/vk-connect';\nimport Navbar from '../Navbar/Navbar';\nimport { star } from '../../icons';\n// const osname = platform();\n\n\n\nclass Rubric extends React.Component<any, any> {\n\n\n\tprivate parseHistory = (history: any[]) => {\n\n\t\tconst parseDate = (iso: string) => {\n\t\t\tvar arr = [\n\t\t\t\t'января',\n\t\t\t\t'февраля',\n\t\t\t\t'марта',\n\t\t\t\t'апреля',\n\t\t\t\t'мая',\n\t\t\t\t'июня',\n\t\t\t\t'июля',\n\t\t\t\t'августа',\n\t\t\t\t'сентября',\n\t\t\t\t'октября',\n\t\t\t\t'ноября',\n\t\t\t\t'декабря',\n\t\t\t];\n\t\t\tlet date = new Date(iso)\n\t\t\tlet month = arr[+date.getMonth()];\n\t\t\tconst result = `${date.getDate()} ${month} ${date.getFullYear()}, ${date.toLocaleTimeString().replace(/(.*:.*?):\\d+/gs, '$1')}`\n\t\t\treturn result\n\t\t}\n\n\n\t\treturn history.map((el, i) => {\n\t\t\treturn <Cell key={i} asideContent={el.rubric} className={(() => (el['Баллы']) < 0 ? \"cellNegative\" : \"historyCell\")()} description={(() => {\n\t\t\t\treturn parseDate(el['Датавремя'])\n\t\t\t})()\n\t\t\t} >\n\n\t\t\t\t{(() => {\n\n\t\t\t\t\tif (!el['Баллы']) el['Баллы'] = 0;\n\n\t\t\t\t\tif (el['Баллы'] > 0 && el['Опыт']) {\n\t\t\t\t\t\treturn <span><span>{el['Баллы']}</span><span className=\"star\">{star('#000000')}</span><span>,&nbsp;{el['Опыт'][0]}&nbsp;опыта {(() => el['Комментарий'] ? \"• \" +el['Комментарий'] : \"\")()}</span></span>\n\t\t\t\t\t} else if (el['Баллы'] === 0 && el['Опыт']) {\n\t\t\t\t\t\treturn <span>{el['Опыт'][0]}&nbsp;опыта {(() => el['Комментарий'] ? \"• \" +el['Комментарий'] : \"\")()}</span>\n\n\t\t\t\t\t}\n\t\t\t\t})()\n\t\t\t\t}\n\n\t\t\t</Cell>\n\t\t})\n\t}\n\n\n\trender() {\n\n\t\tlet {\n\t\t\tgo,\n\t\t\trubric,\n\t\t\t// post,\n\t\t\thistory,\n\t\t\t// sprintData\n\t\t} = this.props\n\n\t\tlet h = history ? history.filter(el => el.rubric === rubric['Название']) : []\n\n\n\n\t\tlet cellHistory = this.parseHistory(h);\n\t\t\n\n\n\t\tconst cover = () => rubric['Обложка'] ? `url(${rubric['Обложка'][0]['url']}) center/cover no-repeat` : '';\n\t\treturn (\n\n\t\t\t<Panel id='rubric'>\n\n\t\t\t\t<Navbar go={go} dataTo='profile'></Navbar>\n\n\t\t\t\t<Cover background={cover()} height=\"fit-content\">\n\t\t\t\t\t<Div className=\"desc\">\n\t\t\t\t\t\t<h1>{rubric['Название']}</h1>\n\t\t\t\t\t\t<ReactMarkdown source={rubric['Описание']} />\n\t\t\t\t\t</Div>\n\t\t\t\t</Cover>\n\n\t\t\t\t{(() => {\n\t\t\t\t\tif (h.length === 0 || !rubric['Итог опыт']) return;\n\n\t\t\t\t\tlet exp = h.filter(el => el['Опыт']).map(el => el['Опыт'][0])\n\t\t\t\t\t\t.reduce((current, next) => current + next);\n\t\t\t\t\treturn <Group title=\"Прогресс\" className=\"progressBarContainer\">\n\t\t\t\t\t\t<InfoRow title={`${Math.round((exp * 100) / rubric['Итог опыт'])}%`} className=\"progressBar\">\n\t\t\t\t\t\t\t<Progress value={(exp * 100) / rubric['Итог опыт']} style={{ width: '100%' }} />\n\t\t\t\t\t\t</InfoRow>\n\t\t\t\t\t</Group>\n\n\t\t\t\t})()}\n\n\t\t\t\t{(() => {\n\t\t\t\t\tif (h.length === 0) return <Group title=\"История\" className=\"history\">\n\t\t\t\t\t\t<Div>Вы пока не участвовали ни в одной активности в этой рубрике.</Div>\n\t\t\t\t\t</Group>\n\t\t\t\t\t//Выводим историю начислений по этой рубрике\n\t\t\t\t\treturn <Group title=\"История\" className=\"history\">\n\t\t\t\t\t\t<List> {cellHistory} </List>\n\t\t\t\t\t</Group>\n\t\t\t\t})()}\n\n\t\t\t\t{(() => {\n\t\t\t\t\t// if (post) {\n\t\t\t\t\t// \tlet link = `https://vk.com/wall${post.owner_id}_${post.id}`\n\t\t\t\t\t// \treturn (\n\t\t\t\t\t// \t\t<div className=\"decWrapper\">\n\t\t\t\t\t// \t\t\t<FixedLayout className=\"bottomBar\" vertical=\"bottom\">\n\t\t\t\t\t// \t\t\t\t<Button size={'l'} stretched={true} onClick={() => connect.send(\"VKWebAppShare\", { \"link\": link })}>Поделиться</Button>\n\t\t\t\t\t// \t\t\t</FixedLayout>\n\t\t\t\t\t// \t\t\t<Div className=\"rubricPost\" style={(() => (osname === ANDROID) ? { paddingBottom: '148px' } : { paddingBottom: '80px' })()}>\n\t\t\t\t\t// \t\t\t\t<h2>Актуальное задание</h2>\n\t\t\t\t\t// \t\t\t\t{post.text}\n\n\t\t\t\t\t// \t\t\t\t{/* <img src={getCover()} className=\"postCover\" alt=\"postCover\" /> */}\n\t\t\t\t\t// \t\t\t</Div>\n\t\t\t\t\t// \t\t</div>\n\t\t\t\t\t// \t)\n\t\t\t\t\t// }\n\t\t\t\t})()}\n\n\t\t\t</Panel>\n\n\t\t);\n\t}\n}\n\nRubric.propTypes = {\n\tid: PropTypes.string.isRequired,\n\tpost: PropTypes.object,\n\tfetchedUser: PropTypes.shape({\n\t\tphoto_200: PropTypes.string,\n\t\tfirst_name: PropTypes.string,\n\t\tlast_name: PropTypes.string,\n\t\tcity: PropTypes.shape({\n\t\t\ttitle: PropTypes.string,\n\t\t}),\n\t}),\n};\n\nexport default Rubric;","import React from 'react';\nimport './LevelBubble.css'\n\nexport default class LevelBubble extends React.Component<any, any> {\n    render() {\n\n        let {\n            action\n        } = this.props\n\n        return (\n            <div className=\"levelBubble\" onClick={action}>{this.props.children}</div>\n        )\n    }\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Panel, Cell, List, PanelHeader, Group, Avatar, HorizontalScroll, platform, ANDROID } from '@vkontakte/vkui';\nimport Icon24BrowserForward from '@vkontakte/icons/dist/24/browser_forward';\nimport \"./Profile.css\";\nimport Cover from '../Cover/Cover';\nimport { star, logo } from '../../icons';\nimport LevelBubble from '../LevelBubble/LevelBubble';\n\n\n\n\n\n\nclass Profile extends React.Component<any, any> {\n\n  \n\n    private parseHistory = (history: any[]) => {\n\n        const parseDate = (iso: string) => {\n            var arr = [\n                'января',\n                'февраля',\n                'марта',\n                'апреля',\n                'мая',\n                'июня',\n                'июля',\n                'августа',\n                'сентября',\n                'октября',\n                'ноября',\n                'декабря',\n            ];\n            let date = new Date(iso)\n            let month = arr[+date.getMonth()];\n            const result = `${date.getDate()} ${month} ${date.getFullYear()}, ${date.toLocaleTimeString().replace(/(.*:.*?):\\d+/gs, '$1')}`\n            return result\n        }\n\n\n        return history.map((el, i) => {\n            return <Cell key={i} asideContent={el.rubric} className={(() => (el['Баллы']) < 0 ? \"cellNegative\" : \"historyCell\")()} description={(() => {\n                return parseDate(el['Датавремя'])\n            })()\n            } ><span>{el['Баллы']}</span><span className=\"star\">{star('#000000')}</span>\n\n            </Cell>\n        })\n    }\n\n\n    \n\n\n\n    render() {\n       \n\n\n        let {\n            fetchedUser,\n            sprintData,\n            history,\n            go,\n            rubrics,\n            market,\n            openSnackbar,\n            snackbar\n        } = this.props\n        \n        let cellHistory = this.parseHistory(history)\n        \n        return (\n           \n            <Panel id='profile'  >\n                <PanelHeader></PanelHeader>\n\n                <Cover fetchedUser={fetchedUser} sprintData={sprintData} height=\"184px\">\n                    <div className=\"logo\" style={{ top: (platform() === ANDROID) ? '25px' : '37px' }}>{logo}</div>\n                    <div className=\"amountContainer\">\n                        <Avatar src={fetchedUser.photo_200} size={72}></Avatar>\n                        <div className=\"amountWrapper\">\n                            <span className=\"amount\">{sprintData['Баланс']}</span>\n                            <span className=\"star\">{star('#ffffff')}</span>\n                            <br />\n                            <a href=\"https://vk.com/@lean.school-kak-zarabotat-v-line-bally-i-zachem\" target=\"_blank\" rel=\"noopener noreferrer\">Как и зачем зарабатывать баллы?</a>\n                            <LevelBubble className=\"levelBubble\" action={openSnackbar}>{Math.round(sprintData['Уровень'])}</LevelBubble>\n                        </div>\n\n                    </div>\n                </Cover>\n\n                \n\n                <Group title=\"Рубрики\" >\n                    <List>\n                        {(() => rubrics\n                            .map((item, i) => {\n                                let cover = () => item['Обложка'] ? <Avatar type=\"image\" src={item['Обложка'][0]['url']} size={72} /> : \"\"\n                                return (<Cell key={i} className=\"rubricsCell\" before={cover()} multiline description={item['desc']} asideContent={<Icon24BrowserForward fill=\"var(--icon_secondary)\" />} onClick={go} data-to='rubric' data-meta={JSON.stringify(item)}>{item['Название']}</Cell>)\n                            })\n                        )()}\n                    </List>\n                </Group>\n\n                <Group title='Товары за баллы'>\n                    <HorizontalScroll>\n                        <div style={{ display: 'flex', paddingLeft: '12px', fontFamily: 'Montserrat' }}>\n\n                            {\n                                market.length > 0 && market.map((item, i) =>\n                                    (<div key={i} className=\"marketItem\">\n                                        <Avatar className=\"marketImage\" type=\"image\" key={i} src={item.thumb_photo} onClick={go} data-to='marketItem' data-meta={JSON.stringify(item)} />\n                                        {item.title.replace(/(\\d+★).*/gs, '$1')}</div>)\n                                )\n                            }\n\n\n                        </div>\n                    </HorizontalScroll>\n\n\n                </Group>\n\n\n                {(() => {\n                    if (cellHistory.length !== 0) {\n                        return (\n                            <Group title=\"История\" className=\"history\"><List> {cellHistory} </List></Group>)\n                    }\n                })()}\n\n                {snackbar}\n            </Panel>\n            \n        );\n    }\n}\n\nProfile.propTypes = {\n    id: PropTypes.string.isRequired,\n    sprintData: PropTypes.object,\n    rubrics: PropTypes.array,\n    history: PropTypes.array,\n    go: PropTypes.func,\n    market: PropTypes.array,\n    fetchedUser: PropTypes.shape({\n        photo_200: PropTypes.string,\n        first_name: PropTypes.string,\n        last_name: PropTypes.string,\n        city: PropTypes.shape({\n            title: PropTypes.string,\n        }),\n    }),\n};\n\nexport default Profile;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Panel, Div, FixedLayout, Button, } from '@vkontakte/vkui';\nimport Cover from '../Cover/Cover';\nimport \"./MarketCard.css\";\nimport Linkify from 'react-linkify';\nimport Navbar from '../Navbar/Navbar';\n\n\n\n\n\n\n\nclass MarketCard extends React.Component<any, any> {\n\n\n    render() {\n\n        let {\n            item,\n            id,\n            go\n        } = this.props\n\n\n\n        const title = item.title.replace(/\\d+★\\s/gm, '');\n        const price = item.title.replace(/(\\d+)★\\s.*/gm, '$1');\n        const url = `https://vk.com/market${item.owner_id}_${item.id}`\n        return (\n\n            <Panel id={id} className=\"marketCard\">\n                <Navbar go={go} dataTo='profile'></Navbar>\n                <Cover height=\"auto\"><h1>{title}</h1>{price} ★</Cover>\n                <Div className=\"desc\">\n                    <Linkify>\n                        {item.description}\n                    </Linkify>\n                    \n                </Div>\n                <FixedLayout className=\"bottomBar\" vertical=\"bottom\">\n                    <Button size={'l'} stretched={true} component=\"a\" href={url} >Открыть в магазине</Button>\n                </FixedLayout>\n            </Panel>\n\n        );\n    }\n}\n\nMarketCard.propTypes = {\n    id: PropTypes.string.isRequired,\n    // item: PropTypes.object.isRequired,\n    fetchedUser: PropTypes.shape({\n        photo_200: PropTypes.string,\n        first_name: PropTypes.string,\n        last_name: PropTypes.string,\n        city: PropTypes.shape({\n            title: PropTypes.string,\n        }),\n    }),\n};\n\nexport default MarketCard;","import React from 'react';\nimport connect from '@vkontakte/vk-connect';\nimport { platform, ANDROID, View, Snackbar, InfoRow, Progress } from '@vkontakte/vkui';\n\nimport { base } from './airtable/airtable';\nimport { R_VK_ID, RUBRICS } from './airtable/constants';\n\nimport splash from './img/splash.GIF';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport \"./main.css\";\n\nimport { VK_GROUP_ID, VK_APP_ID, AMOUNT_TO_NEW_USER } from './constants';\nimport Rubric from './components/Rubric/Rubric';\nimport Profile from './components/Profile/Profile';\nimport MarketCard from './components/MarketCard/MarketCard';\nimport * as Typograf from 'typograf';\n\n\nconst tp = new Typograf({ locale: ['ru', 'en-US'] });\n\nconst splashLoader = <div style={{ width: '100%', height: '100%', backgroundColor: '#770EFD' }}><img src={splash} style={{ width: '100%', height: '100%' }} alt=\"loading...\" /></div>;\n\nconst osname = platform();\n\n\nclass App extends React.Component<any, any> {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tfetchedUser: null,\n\t\t\tactiveView: 'profile',\n\t\t\tauthToken: null,\n\t\t\tisLoading: false,\n\t\t\titems: [],\n\t\t\thistory: [],\n\t\t\trubrics: [],\n\t\t\tsprintData: null,\n\t\t\tmeta: {},\n\t\t\tsnackbar: null\n\n\t\t};\n\t\tthis.getItems = this.getItems.bind(this);\n\t\tthis.openBase = this.openBase.bind(this);\n\t\tthis.onStoryChange = this.onStoryChange.bind(this);\n\t}\n\n\tasync componentDidMount() {\n\t\tthis.setState({ isLoading: true });\n\n\t\tconnect.subscribe(async (e: any) => {\n\t\t\tswitch (e.detail.type) {\n\t\t\t\tcase 'VKWebAppGetUserInfoResult':\n\t\t\t\t\tthis.setState({ fetchedUser: e.detail.data });\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'VKWebAppAccessTokenReceived':\n\t\t\t\t\tthis.setState({ authToken: e.detail.data.access_token });\n\t\t\t\t\tthis.getItems();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'VKWebAppViewRestore':\n\t\t\t\t\tthis.setState({ isLoading: true });\n\t\t\t\t\tthis.getItems();\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.log(e.detail.type);\n\t\t\t}\n\t\t});\n\t\t(osname === ANDROID) ? connect.send(\"VKWebAppSetViewSettings\", { \"status_bar_style\": \"light\", \"action_bar_color\": \"#000000\" }) : connect.send(\"VKWebAppSetViewSettings\", { \"status_bar_style\": \"light\", });\n\t\tconnect.send('VKWebAppGetUserInfo', {});\n\t\tconnect.sendPromise(\"VKWebAppGetAuthToken\", { \"app_id\": VK_APP_ID, \"scope\": \"market\" });\n\n\t}\n\n\t\n\n\topenBase() {\n\n\t\tif (this.state.snackbar) return;\n\n\t\tlet exp = this.state.sprintData['Опыт'];\n\t\tlet sl = exp.toString()\n\t\tlet percent = (sl.length > 3) ? +sl.slice(sl.length - 3) : +sl\n\t\tthis.setState({\n\t\t\tsnackbar:\n\t\t\t\t<Snackbar\n\t\t\t\t\tclassName=\"snackbar\"\n\t\t\t\t\tlayout=\"vertical\"\n\t\t\t\t\tonClose={() => {\n\t\t\t\t\t\tthis.setState({ snackbar: null })\n\t\t\t\t\t\treturn {}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<InfoRow title={`${percent} / 1000 ед. опыта`}>\n\t\t\t\t\t\t<Progress value={percent * 0.1} style={{width: '100%'}}/>\n\t\t\t\t\t</InfoRow>\n\t\t\t\t\t<a href=\"https://vk.com/@lean.school-user-level\" target=\"_blank\" rel=\"noopener noreferrer\">Зачем нужен уровень?</a>\n\n\t\t\t\t</Snackbar>\n\t\t});\n\t}\n\n\tgetItems = async () => {\n\t\tthis.setState({ isLoading: true })\n\n\t\tif (this.state.authToken) {\n\t\t\tlet market = await this.callVKApi('market.get', { owner_id: -(VK_GROUP_ID), access_token: this.state.authToken })\n\t\t\t\t.then((res: any) => res.response.items)\n\t\t\t\t.catch(_ => [])\n\n\t\t\tthis.setState({ items: market })\n\t\t}\n\n\t\tif (this.state.fetchedUser) {\n\t\t\tlet user = this.state.fetchedUser\n\t\t\tlet sprintData = await base.list('Участники', { filterByFormula: `{${R_VK_ID}} = ${this.state.fetchedUser.id}` }).then(res => res[0]);\n\n\t\t\tif (!sprintData) {\n\n\t\t\t\tsprintData = await base.create({ 'Имя': `${user.first_name} ${user.last_name}`, [R_VK_ID]: user.id }, 'Участники')\n\t\t\t\t\t.then(res => base.create({\n\t\t\t\t\t\t\"Баллы\": AMOUNT_TO_NEW_USER,\n\t\t\t\t\t\t\"Профиль\": [res.recID],\n\t\t\t\t\t\t\"Комментарий\": \"Первое начисление\"\n\t\t\t\t\t}, \"Начисления: разминки\"))\n\n\t\t\t\t// this.setActiveModal('amount')\n\n\t\t\t}\n\n\t\t\tthis.setState({ sprintData: sprintData })\n\t\t\tlet promises = RUBRICS\n\t\t\t\t.map(el =>\n\t\t\t\t\tbase.list(el, { filterByFormula: `{${R_VK_ID}} = ${this.state.fetchedUser.id}`, sort: [{ field: 'Датавремя', direction: 'desc' }], maxRecords: 10 })\n\t\t\t\t\t\t.then(res => res.map(obj => {\n\t\t\t\t\t\t\tobj.rubric = el;\n\t\t\t\t\t\t\treturn obj;\n\t\t\t\t\t\t}))\n\t\t\t\t)\n\n\t\t\tlet rubrics = await base.list('Рубрики').catch(e => []);\n\t\t\trubrics = rubrics\n\t\t\t\t.filter(el => el['Опубликовано'])\n\t\t\t\t.map(obj => {\n\t\t\t\t\tif (obj['Описание']) {\n\t\t\t\t\t\tobj['Описание'] = tp.execute(obj['Описание']);\n\t\t\t\t\t\tobj.desc = obj['Описание'].replace(/[*#|]/gs, '').slice(0, 60)\n\t\t\t\t\t\tif (obj.desc.length < obj['Описание'].length) obj.desc = obj.desc + \"…\"\n\t\t\t\t\t}\n\n\t\t\t\t\treturn obj\n\t\t\t\t})\n\t\t\t\t\n\t\t\tthis.setState({ rubrics: rubrics })\n\n\t\t\tlet result = await Promise.all(promises) as any[][]\n\t\t\tlet history = [].concat.apply([], result);\n\n\t\t\thistory = history\n\t\t\t\t.map(item => {\n\t\t\t\t\tconst rubric = rubrics.find(el => item['Рубрика'] && item['Рубрика'][0] === el.recID)\n\t\t\t\t\tif (rubric) item.rubric = rubric['Название']\n\t\t\t\t\treturn item\n\t\t\t\t})\n\t\t\t\t.sort((a, b) => {\n\t\t\t\t\tvar dateA = new Date(a['Датавремя']),\n\t\t\t\t\t\tdateB = new Date(b['Датавремя'])\n\t\t\t\t\treturn dateB - dateA\n\t\t\t\t})\n\n\n\t\t\tthis.setState({ history: history, isLoading: false })\n\n\t\t}\n\n\t};\n\n\n\n\n\n\n\tonStoryChange(e) {\n\t\tthis.setState({ activeStory: e.currentTarget.dataset.story })\n\t}\n\n\n\tcallVKApi(method: string, params?: any) {\n\t\tlet obj = { 'access_token': this.state.authToken, 'v': '5.87' }\n\t\tparams = !params ? obj : Object.assign(obj, params)\n\n\t\treturn connect.sendPromise(\"VKWebAppCallAPIMethod\", {\n\t\t\t'method': method,\n\t\t\t'params': params\n\t\t})\n\t}\n\n\n\tsetLocation = (route) => {\n\t\tif (route !== 'profile') {\n\t\t\tconnect.send('VKWebAppSetLocation', { location: route });\n\t\t} else {\n\t\t\tconnect.send('VKWebAppSetLocation', { location: '' });\n\t\t}\n\t}\n\n\tgo = async (e) => {\n\t\tconst route = e.currentTarget.dataset.to;\n\t\tconst meta = e.currentTarget.dataset.meta;\n\t\tconst parseMeta = meta ? JSON.parse(meta) : null\n\t\tif (parseMeta) this.setState({ meta: parseMeta })\n\t\tif (route === 'rubric') {\n\t\t\tlet post = await this.getWallPost(parseMeta[\"ТэгЗадания\"])\n\t\t\tthis.setState({ post: post })\n\t\t}\n\n\t\tthis.setState({ activeView: route })\n\t\t// this.setLocation(route)\n\t};\n\n\n\tgetWallPost = async (query: string) => {\n\n\t\treturn connect.sendPromise('VKWebAppCallAPIMethod', {\n\t\t\tmethod: 'wall.search',\n\t\t\tparams: {\n\t\t\t\towner_id: -VK_GROUP_ID,\n\t\t\t\tquery: query,\n\t\t\t\tcount: 1,\n\t\t\t\taccess_token: this.state.authToken,\n\t\t\t\tv: '5.103'\n\t\t\t}\n\t\t}).then((res: any) => {\n\t\t\tlet post = res.response.items[0];\n\t\t\tpost.text = tp.execute(post.text);\n\t\t\treturn post;\n\t\t}).catch(_ => null)\n\n\n\t}\n\n\n\n\n\trender() {\n\t\tconst { fetchedUser, isLoading, history, sprintData, rubrics, items } = this.state;\n\t\tif (!fetchedUser || isLoading) return splashLoader;\n\n\t\treturn (\n\n\t\t\t\n\t\t\t<View id=\"main\" activePanel={this.state.activeView}>\n\t\t\t\t<Profile id=\"profile\" snackbar={this.state.snackbar} openSnackbar={this.openBase} market={items} rubrics={rubrics} go={this.go} fetchedUser={this.state.fetchedUser} history={history} sprintData={sprintData} ></Profile>\n\t\t\t\t<Rubric id=\"rubric\" fetchedUser={this.state.fetchedUser} rubric={this.state.meta} post={this.state.post} go={this.go} history={history} sprintData={sprintData}></Rubric>\n\t\t\t\t<MarketCard id=\"marketItem\" go={this.go} item={this.state.meta}></MarketCard>\n\t\t\t</View >\n\t\t\n\n\t\t)\n\t}\n}\n\n\nexport default App;\n\n","import 'core-js/features/map';\nimport 'core-js/features/set';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport connect from '@vkontakte/vk-connect';\nimport App from './App';\n// import registerServiceWorker from './sw';\n\n// Init VK  Mini App\nconnect.send('VKWebAppInit');\n\n\n// Если вы хотите, чтобы ваше веб-приложение работало в оффлайне и загружалось быстрее,\n// расскомментируйте строку с registerServiceWorker();\n// Но не забывайте, что на данный момент у технологии есть достаточно подводных камней\n// Подробнее про сервис воркеры можно почитать тут — https://vk.cc/8MHpmT\n// registerServiceWorker();\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}