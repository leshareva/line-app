{"version":3,"sources":["img/splash.GIF","components/Cover/Cover.tsx","components/Navbar/Navbar.tsx","Panels/Rubric/RubricTabs.tsx","Panels/Rubric/ScheduleListItem.tsx","Panels/Rubric/ScheduleList.tsx","config.ts","Airtable.ts","Helpers.ts","Panels/Rubric/Rubric.tsx","icons.tsx","Panels/Profile/ProfileTabs.tsx","components/Tag/Tag.tsx","components/HistoryList.tsx","Panels/Profile/AchievesList.tsx","Panels/Profile/RubricsList.tsx","Panels/Profile/LevelBubble/LevelBubble.tsx","Panels/Profile/UserComponent.tsx","Panels/Profile/TaskCard/TaskCard.tsx","Panels/Profile/TasksComponent.tsx","Panels/Profile/Profile.tsx","Panels/EventDetailComponent/EventDetailComponent.tsx","interfaces.tsx","components/ModalCardComponent.tsx","Api.ts","App.tsx","index.tsx"],"names":["module","exports","Cover","this","props","background","height","className","style","minHeight","children","React","Component","Navar","go","dataTo","meta","buttonColor","osname","platform","IOS","marginTop","left","onClick","data-to","data-meta","color","RubricTabs","rubric","history","onClickHandler","selectedTab","lessons","selected","length","ScheduleListItem","lesson","onCellClick","expandable","multiline","lessonID","recID","before","description","substring","ScheduleList","state","isLoading","Object","keys","map","key","i","les","header","replace","index","AIR_CONFIG","apikey","base","tLOGS","tUSERS","AirtableConnector","config","air","list","listname","options","a","filter","filterByFormula","generateFilterstring","getByID","id","find","create","data","params","update","delete","rec_ids","listName","fileds","arr","reg","value","condition","isNaN","push","join","Airtable","endpointUrl","apiKey","Promise","resolve","reject","cells","select","eachPage","records","fetchNextPage","forEach","el","fields","rec_id","err","console","error","record","arrays","splice","bunch","setTimeout","field","destroy","Air","parseQueryString","string","slice","split","queryParam","kvp","reduce","query","parseDate","iso","date","Date","month","getMonth","getDate","getFullYear","toLocaleTimeString","Time","d","setHours","getHours","toTimeString","formatLessonTime","0","1","2","3","4","5","6","getDay","Rubric","_isMounted","purchases","activeTab","goods","getPurchases","user","catch","log","res","pursh","renderAbonement","good","size","getLessons","setState","fetchHistoryData","userID","rubricID","rubricTable","then","item","e","obj","days","day","items","mode","currentTarget","dataset","tabName","exp","current","next","title","Math","round","width","paddingLeft","source","star","fill","viewBox","xmlns","logo","fillRule","clipRule","ProfileTabs","tabs","Tag","HistoryList","parseHistory","renderImage","src","renderModalData","videoId","opts","playerVars","start","autoplay","renderBottom","stars","display","openModal","type","body","caption","actions","bottom","renderTitle","fetchHistory","AchieveList","achieves","fetchAchieves","proms","achieve","fetchRubricHistory","userHistory","achievedItems","acivedItem","achieved","all","result","achive","desc","backgroundColor","textDecoration","separator","marginBottom","RubricsList","rubrics","fetchRubrics","asideContent","LevelBubble","action","UserComponent","levels","fetchLevelsData","photo_200","need_exp_to_level_up","levelExperience","next_level","current_level","renderLevelData","TaskCard","backTo","event_type","removeMd","sort","b","skill","renderSkills","TasksComponent","tasks","events","fetchTasks","fetchEvents","event","padding","lineHeight","eventsCards","marginLeft","cardList","Profile","snackbar","top","ANDROID","href","target","onButtonClick","tp","Typograf","locale","EventDetailComponent","message","selectedFile","hasAccess","sendData","purchase","api","accruals","user_rec_id","comment","event_rec_id","amount","purchase_ids","queryParams","window","location","search","vk_are_notifications_enabled","bridge","send","Error","undo","_","checkPermissions","fetchRubric","fetchData","fetchLessonData","onBackClick","rub","fetchPurchases","renderPaymentBlock","stretched","execute","details","renderDetails","paddingBottom","renderDetailsBlock","vertical","label","renderBottomBar","iAchieve","Filter","iRubric","ModalCardComponent","modalData","onClose","onButtonClickHandler","buttonLabel","EventTypes","EventType","Events","include_event_type","event_type_id","Event","Levels","Level","Goods","view","Good","User","Users","vk_id","resp","Accruals","name","email","Accrual","opt","direction","max_records","maxRecords","last_month","toISOString","file_urls","isAvailableToUser","level","level_no","event_types","airtable_conf","users","splashLoader","splash","alt","App","fetchUserData","initUser","first_name","last_name","setLocation","route","activeView","onRubricCellClickHandler","fetchGoods","activeModal","authToken","setActiveModal","bind","fetchUserPurchases","fetchTasksByUser","modal","subscribe","detail","userData","assign","hashParams","hash","r","access_token","Number","air_schema","t_purchases","f_purchases","status","undefined","visited_events","thing","findIndex","t","right","settlingHeight","activePanel","fetchRubricsData","rubricCellClickHandler","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.7a6a8797.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/splash.75e96a0e.GIF\";","import React from 'react';\nimport { Div } from '@vkontakte/vkui'\nimport './Cover.css'\n\nexport default class Cover extends React.Component<any, any> {\n\n\n    render() {\n\n        const {\n            background,\n            height\n        } = this.props\n        return (\n            <Div className=\"cover\" style={{ height: height ? height : '232px', minHeight: '232px', background: background ? background : 'linear-gradient(200.98deg, #485563 -13.11%, #29323C 75.28%)' }}>\n                {/* {(() => content)()} */}\n                <div className=\"coverContainer\">{this.props.children}</div>\n            </Div>\n        )\n    }\n}\n\n","import React from 'react'\nimport { PanelHeader, platform, IOS, PanelHeaderBack } from \"@vkontakte/vkui\";\n\n\nexport default class Navar extends React.Component<any, any> {\n    render() {\n        let { go, dataTo, meta, buttonColor} = this.props\n        const osname = platform();\n    \n        return (<PanelHeader className=\"navBar\" style={(() => osname === IOS ? {} : { marginTop: '81px' })()} left={<PanelHeaderBack onClick={go} data-to={dataTo} data-meta={meta} style={{color: buttonColor}}/>}>{this.props.children}</PanelHeader>)\n    }\n}","import React from 'react'\nimport { Tabs, TabsItem, HorizontalScroll } from '@vkontakte/vkui'\n\ninterface iRubricTabs {\n    rubric: any\n    history: any[]\n    lessons: any[]\n    onClickHandler: (tabName: string) => void\n    selectedTab: string\n}\n\nexport default class RubricTabs extends React.Component<iRubricTabs, any> {\n\n    render() {\n        let { rubric, history, onClickHandler, selectedTab, lessons } = this.props\n        \n        return <Tabs>\n            <HorizontalScroll>\n            {(lessons)\n                ?\n                <TabsItem\n                    onClick={() => onClickHandler('schedule')}\n                    selected={selectedTab === 'schedule'}\n                >Расписание</TabsItem>\n                : null\n\n            }\n\n\n\n            {(history && history.length !== 0)\n                ? <TabsItem\n                    onClick={() => onClickHandler('history')}\n                    selected={selectedTab === 'history'}\n                >Прогресс</TabsItem>\n                : null\n            }\n\n            {(rubric['Описание'])\n                ? <TabsItem\n                    onClick={() => onClickHandler('desc')}\n                    selected={selectedTab === 'desc'}\n                >О рубрике</TabsItem>\n                : null\n\n            }\n\n            </HorizontalScroll>\n            \n        </Tabs>\n    }\n}","import React from 'react'\nimport { Cell } from '@vkontakte/vkui'\n\ninterface iScheduleListItem {\n    lesson: any\n    onCellClick: (lesson: any) => void\n}\nexport default class ScheduleListItem extends React.Component<iScheduleListItem, any>{\n\n\n    render() {\n\n        let { lesson, onCellClick } = this.props\n        return <Cell\n            expandable\n            multiline\n            onClick={()=>onCellClick({ lessonID: lesson.recID })}\n            before={<div className=\"time\"></div>}\n            description={`${lesson['Время']} ${lesson['Описание'] ? ',' + lesson['Описание'].substring(0, 70) : ''}`}\n        >\n            {`${lesson['Name']}`}\n        </Cell>\n    }\n\n}","import React from 'react'\nimport { Group } from '@vkontakte/vkui'\nimport ScheduleListItem from './ScheduleListItem';\n\ninterface iScheduleList {\n    rubric: any\n    onCellClick: (meta: any) => void\n    lessons: any[]\n}\n\n\n\nexport default class ScheduleList extends React.Component<iScheduleList, any>{\n\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            isLoading: true\n        }\n    }\n\n\n    render() {\n        let { lessons, onCellClick } = this.props\n        let days = Object.keys(lessons);\n        return days.map((key, i) => {\n            let les = lessons[key];\n            return <div className=\"calendarWrapper\" key={i}>\n                <Group header={<h1 className=\"calendarHeader\">{key.replace(/(\\d+\\s\\D{3}?).+/gs, '$1') + \", \" + les['day']}</h1>}  >\n                    {(() => {\n                        let less = lessons[key]['items']\n                        return less.map((lesson, index) => {\n                            return (<ScheduleListItem key={index} lesson={lesson} onCellClick={onCellClick} />)\n                        })\n                    })()}\n                </Group>\n            </div>\n        })\n\n\n\n    }\n}","//DEVELOPMENT\n// export const AIR_CONFIG = {\n//     apikey: 'keyCjoy0c7MaRyisi',\n//     base: 'appJJ0nmLtF6XYalJ',\n//     tLOGS: 'Начисления и списания',\n//     tUSERS: 'Участники'\n// }\n\n//PRODUCTION\nexport const AIR_CONFIG = {\n    apikey: 'keyCjoy0c7MaRyisi',\n    base: 'appEXq7BJ3ceoFRtr',\n    // base: 'apprhfMNTLVTiJC5A', //DEV\n    tLOGS: 'Начисления и списания',\n    tUSERS: 'Участники'\n}","\nimport * as  Air from 'airtable';\nimport { iBaseConnector } from \"./BaseConnector\";\n\n\n\n\nexport interface iSort { field: string, direction: \"desc\" | \"asc\" }\n\n// export interface any {\n//     title?: string\n//     level?: number\n//     name?: string\n// }\n\nexport interface iAirtableListOptions {\n    filter?: any\n    filterByFormula?: string\n    fields?: Array<string>,\n    sort?: iSort[],\n    view?: string,\n    maxRecords?: number | string\n}\n\n\nexport interface iAirConfig {\n    apikey: string\n    base: string\n}\n\nexport interface iAirtableCreateOptions {\n    fields: any\n}\n\nexport interface iAirtableUpdateOptions {\n    id: string\n    fields: any\n}\n\nexport interface iAttachment {\n    url: string\n}\n\n\nexport class AirtableConnector implements iBaseConnector {\n    private air: Airtable\n\n    constructor(config: any) {\n        this.air = new Airtable(config);\n    }\n    list = async (listname: string, options?: iAirtableListOptions): Promise<any[]> => {\n        if (options && options.filter) {\n            options.filterByFormula = this.generateFilterstring(options.filter)\n\n            delete options.filter\n        }\n        return this.air.list(listname, options)\n    }\n    getByID = async (id: string, listname: string): Promise<any> => this.air.find(id, listname)\n    create = async (data: iAirtableCreateOptions[], listname: string, params?: { typecast: boolean }): Promise<any[]> => this.air.create(data, listname, params)\n    update = async (data: iAirtableUpdateOptions[], listname: string, params?: { typecast: boolean }): Promise<any[]> =>this.air.update(data, listname, params)\n    delete = async (rec_ids: string[], listName: string): Promise<any> => this.air.delete(rec_ids, listName)\n\n    protected generateFilterstring = (fileds: any): string => {\n\n        let keys = Object.keys(fileds)\n\n        let arr: string[] = []\n        keys.map(key => {\n            let reg = /^([><=!]*)(.*)/gs\n            let value = fileds[key].replace(reg, '$2');\n            let condition = fileds[key].replace(reg, '$1')\n\n            if (value === 'null') value = 'BLANK()'\n            else if (isNaN(value)) value = \"'\" + value + \"'\"\n\n            arr.push((condition === '!=') ? 'NOT({' + key + '}=' + value + ')' : '{' + key + '}' + condition + value)\n            return key\n        })\n\n        return (arr.length === 1) ? arr[0] : 'AND(' + arr.join(', ') + ')'\n    }\n}\n\n\nexport default class Airtable extends Air {\n\n    private base: any\n\n\n    constructor(config: iAirConfig) {\n        super({ endpointUrl: 'https://api.airtable.com', apiKey: config.apikey })\n        this.base = super.base(config.base)\n    }\n\n\n\n\n    list = async (listName: string, options?: iAirtableListOptions) =>\n        new Promise<Array<any>>((resolve, reject) => {\n            let cells: any[] = []\n\n\n\n            this.base(listName).select(options ? options : {})\n                .eachPage(function page(records: any[], fetchNextPage: () => void) {\n                    records\n                        .forEach(el => {\n                            el.fields.rec_id = el.id\n                            cells.push(el.fields)\n                        })\n\n                    // This function (`page`) will get called for each page of records.\n                    fetchNextPage()\n\n                }, function done(err: any) {\n                    if (err) { console.error(err); reject(err); return; }\n                    resolve(cells)\n                })\n\n        })\n\n\n\n\n\n    find = async (rec_id: string, listName: string) =>\n        new Promise<any>((resolve, reject) => {\n            this.base(listName).find(rec_id, function (err: any, record: any) {\n                if (err) { reject(err); return; }\n                if (!record) { reject('no record: ' + rec_id) }\n                record.fields.rec_id = record.id\n                resolve(record.fields)\n            })\n        });\n\n    create = async (fields: iAirtableCreateOptions[], listName: string, params?: { typecast: boolean }) =>\n        new Promise<any[]>(async (resolve, reject) => {\n\n            let arrays: any[] = [],\n                size = 10\n\n            while (fields.length > 0) arrays.push(fields.splice(0, size))\n            for (const bunch of arrays) {\n\n                await this.base(listName).create(bunch, params, function (err: any, records: any[]) {\n                    if (err) { console.error(err); return; }\n                    resolve(records.map(record => {\n                        record.fields.rec_id = record.id\n                        return record.fields\n                    }))\n                })\n\n                await setTimeout(() => { }, 2000)\n            }\n\n        })\n\n\n    replace = (rec_id: string, field: any, listName: string) =>\n        new Promise(resolve => {\n\n            this.base(listName)\n                .replace(rec_id, field, (err: any, record: any) => {\n                    if (err) { console.error(err); return; }\n                    record.fields.rec_id = record.id\n                    resolve(record.fields)\n                })\n        })\n\n    update = (params: iAirtableUpdateOptions[], listName: string, options?: { typecast: boolean }) =>\n        new Promise<any[]>(async (resolve, reject) => {\n\n            var arrays: any[] = [],\n                size = 10\n\n            while (params.length > 0) arrays.push(params.splice(0, size))\n            for (const bunch of arrays) {\n\n                await this.base(listName).update(bunch, options, (err: any, records: any[]) => {\n                    if (err) {\n                        console.error(err)\n                        reject(err)\n                    }\n                    resolve(records.map(record => {\n                        record.fields.rec_id = record.id\n                        return record.fields\n                    }))\n                })\n\n                await setTimeout(() => { }, 2000)\n            }\n\n\n\n        })\n\n\n    delete = (rec_ids: string[], listName: string) =>\n        new Promise((resolve, reject) => {\n            this.base(listName).destroy(rec_ids, (err: any, record: any) => {\n                if (err) {\n                    console.error(err)\n                    reject(err)\n                }\n                resolve(rec_ids)\n            })\n        })\n\n}\n","export const parseQueryString = (string) => {\n    return string.slice(1).split('&')\n        .map((queryParam) => {\n            let kvp = queryParam.split('=');\n            return { key: kvp[0], value: kvp[1] }\n        })\n        .reduce((query, kvp) => {\n            query[kvp.key] = kvp.value;\n            return query\n        }, {})\n};\n\nexport const parseDate = (iso: string) => {\n    var arr = [\n        'января',\n        'февраля',\n        'марта',\n        'апреля',\n        'мая',\n        'июня',\n        'июля',\n        'августа',\n        'сентября',\n        'октября',\n        'ноября',\n        'декабря',\n    ];\n    let date = new Date(iso)\n    let month = arr[+date.getMonth()];\n    const result = `${date.getDate()} ${month} ${date.getFullYear()}, ${date.toLocaleTimeString().replace(/(.*:.*?):\\d+/gs, '$1')}`\n    return result\n}\n\nexport function Time(date) {\n    var d = new Date(date);\n    d.setHours(d.getHours());\n    let res = d.toTimeString().substring(0, 5);\n    return res;\n\n}\n\n\nexport function formatLessonTime(el: any) {\n    const days = {\n        0: 'вс',\n        1: 'пн',\n        2: 'вт',\n        3: 'ср',\n        4: 'чт',\n        5: 'пт',\n        6: 'сб'\n    }\n\n    let key = parseDate(el['Дата']).replace(/^(\\d+\\s.+?)\\s.+/gs, '$1');\n    el['День недели'] = days[new Date(el['Дата']).getDay()]\n    el['Время'] = Time(el['Дата'])\n    el['Дата'] = key;\n    return el\n}\n\n\nexport function declOfNum(number, titles) {  \n    let cases = [2, 0, 1, 1, 1, 2];  \n    return titles[ (number%100>4 && number%100<20)? 2 : cases[(number%10<5)?number%10:5] ];  \n}\n","import React from 'react';\nimport { Panel, Div, Card, Group, Progress, InfoRow } from '@vkontakte/vkui';\n\nimport \"./Rubric.css\";\nimport Cover from '../../components/Cover/Cover';\nimport ReactMarkdown from 'react-markdown';\nimport Navbar from '../../components/Navbar/Navbar';\n\nimport RubricTabs from './RubricTabs';\nimport ScheduleList from './ScheduleList';\n\nimport { AIR_CONFIG } from '../../config'\nimport Airtable from '../../Airtable';\nimport { parseDate, Time } from '../../Helpers';\n\nlet base = new Airtable(AIR_CONFIG)\n\n\ninterface iRubricPage {\n\tid: string\n\tuser: any\n\trubric: any\n\tgo: (route: string, meta?: any) => void\n\trubricCellClickHandler: (dataTo: string, metaData: any) => void\n\tgetLessons: () => Promise<any[]>\n}\n\n\nclass Rubric extends React.Component<iRubricPage, any> {\n\n\t_isMounted: boolean = false\n\n\tstate = {\n\t\tpurchases: null,\n\t\tlessons: null,\n\t\tactiveTab: null,\n\t\tgoods: null,\n\t\thistory: []\n\t}\n\n\n\n\n\tasync componentDidMount() {\n\t\tthis._isMounted = true\n\t\tlet { rubric } = this.props\n\t\tconst lessons = await this.getLessons()\n\n\t\tthis.setState({ lessons: lessons });\n\n\t\tlet history = await this.fetchHistoryData(this.props.user.id, rubric['recID'], rubric['Таблица'])\n\t\tlet purchases = await this.getPurchases()\n\t\tif(this._isMounted) {\n\t\t\tthis.setState({ history: history })\n\t\t\tif (lessons && Object.keys(lessons).length !== 0) {\n\t\t\t\tthis.setState({ activeTab: 'schedule' })\n\t\t\t} else if (history.length !== 0) {\n\t\t\t\tthis.setState({ activeTab: 'history' })\n\t\t\t} else {\n\t\t\t\tthis.setState({ activeTab: 'desc' })\n\t\t\t}\n\n\t\t\tthis.setState({ purchases:  purchases });\n\t\t}\n\t\t\n\t}\n\n\n\n\n\n\tcomponentWillUnmount() {\n\t\tthis._isMounted = false;\n\t}\n\n\n\tasync fetchHistoryData(userID: number, rubricID: string, rubricTable: string) {\n\t\treturn base.list(rubricTable, { filterByFormula: `AND({VK-ID} = ${userID}, NOT({Рубрика}=BLANK()))` }).then((history: any[]) => {\n\t\t\treturn history.filter(item => item['Рубрика'][0] === rubricID)\n\t\t}).catch(e => [])\n\t}\n\n\n\tasync getLessons() {\n\t\treturn this.props.getLessons().then(res=>res.filter(el=>el['RubricID']===this.props.rubric.recID))\n\t\t.then((res: any[]) => {\n\n\t\t\tif (res.length === 0) return\n\t\t\tlet obj = {}\n\n\n\t\t\tconst days = {\n\t\t\t\t0: 'вс',\n\t\t\t\t1: 'пн',\n\t\t\t\t2: 'вт',\n\t\t\t\t3: 'ср',\n\t\t\t\t4: 'чт',\n\t\t\t\t5: 'пт',\n\t\t\t\t6: 'сб'\n\t\t\t}\n\n\t\t\tres.forEach(el => {\n\t\t\t\tlet key = parseDate(el['Дата']).replace(/^(\\d+\\s.+?)\\s.+/gs, '$1');\n\t\t\t\tlet date = new Date(el['Дата']);\n\n\t\t\t\tobj[key] = {\n\t\t\t\t\tdate: key,\n\t\t\t\t\tday: days[date.getDay()],\n\t\t\t\t\titems: []\n\t\t\t\t}\n\n\n\t\t\t})\n\n\n\n\n\t\t\tres.forEach(el => {\n\t\t\t\tlet key = parseDate(el['Дата']).replace(/^(\\d+\\s.+?)\\s.+/gs, '$1');\n\t\t\t\tel['День недели'] = days[new Date(el['Дата']).getDay()]\n\t\t\t\tel['Время'] = Time(el['Дата'])\n\t\t\t\t// el['Окончание'] = Time(el['Время окончания'])\n\t\t\t\tel['Дата'] = key;\n\t\t\t\tel['rubric'] = this.props.rubric;\n\t\t\t\tobj[key]['items'].push(el)\n\t\t\t})\n\n\t\t\tconsole.log(obj)\n\t\t\treturn obj\n\t\t})\n\t}\n\n\n\n\tselect(e) {\n\t\tconst mode = e.currentTarget.dataset.mode;\n\t\tthis.setState({ mode });\n\t}\n\n\n\n\n\n\tgetPurchases = async () => {\n\t\tconst user = this.props.user;\n\t\tconst rubric = this.props.rubric;\n\t\tlet res = await base.list('Покупки', { filterByFormula: `AND({VK-ID}=${user.id}, {Статус}=BLANK() )`, fields: [\"Название\", \"Рубрика\", \"Осталось\", \"Датавремя\", \"Кол-во тренировок\", \"Посещеные тренировки\"] }).catch(err => {\n\t\t\tconsole.log(err);\n\t\t\treturn [];\n\t\t}) as [];\n\n\t\tlet pursh = res.filter(el => el['Осталось'] && el['Рубрика'] && el['Рубрика'][0] === rubric.recID)\n\t\treturn pursh[0];\n\t}\n\n\trenderAbonement = () => {\n\n\t\tif (!this.state.goods) return;\n\n\t\treturn this.state.goods.map((good, i) => {\n\n\t\t\treturn <Card size=\"l\" key={i}>\n\t\t\t\t<div className=\"abonement\">\n\t\t\t\t\t<h2>{good[\"Название товара\"]}</h2>\n\t\t\t\t</div>\n\t\t\t</Card>\n\t\t})\n\t}\n\n\n\n\trender() {\n\n\t\tlet {\n\t\t\tgo,\n\t\t\trubric,\n\t\t} = this.props\n\n\n\n\t\t// const cover = () => rubric['Обложка'] ? `url(${rubric['Обложка'][0]['url']}) center/cover no-repeat` : '';\n\n\t\treturn (\n\n\t\t\t<Panel id='rubric'>\n\n\t\t\t\t<Navbar go={() => go('profile')} dataTo='profile'></Navbar>\n\n\t\t\t\t<Cover height=\"fit-content\">\n\t\t\t\t\t{/* <Cover background={cover()} height=\"fit-content\"> */}\n\t\t\t\t\t<Div className=\"desc\"><h1>{rubric['Название']}</h1></Div>\n\t\t\t\t</Cover>\n\n\n\t\t\t\t<RubricTabs\n\t\t\t\t\trubric={rubric}\n\t\t\t\t\tselectedTab={this.state.activeTab}\n\t\t\t\t\tlessons={this.state.lessons}\n\t\t\t\t\thistory={this.state.history}\n\t\t\t\t\tonClickHandler={(tabName) => this.setState({ activeTab: tabName })}\n\t\t\t\t/>\n\n\t\t\t\t{(() => {\n\t\t\t\t\tif (!rubric['Итог опыт'] || !this.state.history) return\n\n\t\t\t\t\tlet exp = this.state.history.filter(el => el['Опыт']).map(el => el['Опыт']).reduce((current, next) => current + next, 0);\n\t\t\t\t\treturn <Group title=\"Прогресс\" className=\"progressBarContainer\">\n\t\t\t\t\t\t<InfoRow header={`${Math.round((exp * 100) / rubric['Итог опыт'])}%`} className=\"progressBar\">\n\t\t\t\t\t\t\t<Progress value={(exp * 100) / rubric['Итог опыт']} style={{ width: '100%' }} />\n\t\t\t\t\t\t</InfoRow>\n\t\t\t\t\t</Group>\n\t\t\t\t})()}\n\n\t\t\t\t{(this.state.activeTab === 'desc' && rubric['Описание'])\n\t\t\t\t\t? <Div style={{ paddingLeft: 'var(--wrapper-padding-2x)' }}><ReactMarkdown source={rubric['Описание']} /> </Div>\n\t\t\t\t\t: ''\n\t\t\t\t}\n\n\n\t\t\t\t{(() => {\n\t\t\t\t\tif (this.state.activeTab !== 'schedule') return;\n\t\t\t\t\treturn <ScheduleList\n\t\t\t\t\t\tlessons={this.state.lessons}\n\t\t\t\t\t\tonCellClick={(e) => this.props.go('lesson', e)}\n\t\t\t\t\t\trubric={rubric}\n\t\t\t\t\t/>\n\t\t\t\t})()}\n\n\t\t\t</Panel>\n\n\t\t);\n\t}\n}\n\n\nexport default Rubric;","import React from 'react';\n\nexport const star = (fill: string) => <svg width=\"24\" height=\"22\" viewBox=\"0 0 24 22\" xmlns=\"http://www.w3.org/2000/svg\" fill={fill}>\n<path d=\"M12 0L14.8214 8.11672L23.4127 8.2918L16.5651 13.4833L19.0534 21.7082L12 16.8L4.94658 21.7082L7.43493 13.4833L0.587322 8.2918L9.17863 8.11672L12 0Z\" />\n</svg>;\n\nexport const logo = <svg width=\"25\" height=\"24\" viewBox=\"0 0 25 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M15.2 2.6636L7.93161 18.2513H11.033C12.0258 18.2513 12.012 19.799 10.9916 19.799H6.74475C6.12427 19.799 5.8485 19.1496 6.0829 18.6383C6.26215 18.2582 6.43796 17.8782 6.61376 17.4982C6.78956 17.1182 6.96537 16.7382 7.14462 16.3581C9.61277 11.024 12.0671 5.70377 14.5215 0.383494L14.5215 0.383475C14.7559 -0.127825 15.6246 -0.127825 15.859 0.383475C16.0382 0.763482 16.214 1.14349 16.3898 1.5235C16.5656 1.90353 16.7414 2.28356 16.9207 2.6636C18.5971 6.29748 20.2799 9.93137 21.9648 13.5697C22.7467 15.2581 23.529 16.9475 24.3114 18.6383C24.5596 19.1496 24.27 19.799 23.6495 19.799H16.0244V23.2538C16.0244 24.2487 14.4801 24.2487 14.4801 23.2538V19.0252C14.4801 18.6106 14.8386 18.2513 15.2523 18.2513H22.4614L15.2 2.6636ZM24.4 1.4C24.4 0.626843 23.7731 1.11759e-08 23 1.11759e-08C22.2268 1.11759e-08 21.6 0.626843 21.6 1.4C21.6 2.17316 22.2268 2.8 23 2.8C23.7731 2.8 24.4 2.17316 24.4 1.4Z\" fill=\"white\" />\n</svg>","import React from 'react'\nimport { Tabs, TabsItem, HorizontalScroll } from '@vkontakte/vkui'\n\ninterface iProfileTabs {\n    tabs: string[]\n    onClickHandler: (tabName: string) => void\n    selectedTab: string\n}\n\nexport default class ProfileTabs extends React.Component<iProfileTabs, any> {\n\n \n\n    render() {\n        let { onClickHandler, selectedTab, tabs } = this.props\n\n        if (!tabs || tabs.length === 0) return null\n\n        return <Tabs>\n            <HorizontalScroll>\n\n                {\n                    (() => {\n                        if (tabs.find(el => el === 'tasks')) {\n                            return <TabsItem\n                                onClick={() => onClickHandler('tasks')}\n                                selected={selectedTab === 'tasks'}\n                            >Задания</TabsItem>\n                        }\n                    })()\n                }\n\n                {\n                    (() => {\n                        if (tabs.find(el => el === 'achieves')) {\n                            return <TabsItem\n                                onClick={() => onClickHandler('achieves')}\n                                selected={selectedTab === 'achieves'}\n                            >Достижения</TabsItem>\n                        }\n                    })()\n                }\n\n\n                {(tabs.find(el => el === 'history'))\n                    ? <TabsItem\n                        onClick={() => onClickHandler('history')}\n                        selected={selectedTab === 'history'}\n                    >Разборы</TabsItem>\n                    : null\n                }\n\n                {\n                    (() => {\n                        if (tabs.find(el => el === 'rubrics')) {\n                            return <TabsItem\n                                onClick={() => onClickHandler('rubrics')}\n                                selected={selectedTab === 'rubrics'}\n                            >Рубрики</TabsItem>\n                        }\n                    })()\n                }\n\n\n\n\n            </HorizontalScroll>\n        </Tabs>\n    }\n}","import React from 'react'\nimport './Tag.css'\n\nexport default class Tag extends React.Component<any, any>{\n    render() {\n        return <div className=\"amount_counter\" >{this.props.children}</div>\n    }\n}","import React from 'react'\nimport { Group, Div, List, Avatar, Button, RichCell } from '@vkontakte/vkui'\nimport { star } from '../icons'\nimport { iModalData } from '../interfaces';\nimport Youtube from 'react-youtube'\nimport Tag from './Tag/Tag';\n\n\n\ninterface iHistoryList {\n    fetchHistory: ()=> Promise<any[]>,\n    openModal: (modal: { type: string, data?: iModalData }) => void\n}\nexport default class HistoryList extends React.Component<iHistoryList, any>{\n\n    _isMounted: boolean = false\n\n    state = {\n        history: [],\n        isLoading: false\n    }\n\n\n    async componentDidMount() {\n        this._isMounted = true\n        this.setState({ isLoading: true })\n\n        const history = await this.props.fetchHistory()\n\n        if (this._isMounted) {\n            this.setState({ history: history, isLoading: false })\n        }\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n\n    parseDate = (iso: string) => {\n        var arr = [\n            'января',\n            'февраля',\n            'марта',\n            'апреля',\n            'мая',\n            'июня',\n            'июля',\n            'августа',\n            'сентября',\n            'октября',\n            'ноября',\n            'декабря',\n        ];\n        let date = new Date(iso)\n        let month = arr[+date.getMonth()];\n        const result = `${date.getDate()} ${month} ${date.getFullYear()}, ${date.toLocaleTimeString().replace(/(.*:.*?):\\d+/gs, '$1')}`\n        return result\n    }\n\n\n    private parseHistory = (history: any[]) => {\n\n        const renderTitle = (el) => {\n            if (el['Макет'] && !el['Оценка']) return <span>Ожидает разбора</span>\n\n            if (el['Оценка']) return <span>{el['Оценка']}</span>\n\n            if (el['Баллы'] > 0 && el['Опыт'] && el['Опыт'] > 0) {\n                return <span><span>{el['Баллы']}</span><span className=\"star\">{star('#000000')}</span><span>,&nbsp;{el['Опыт']}&nbsp;опыта {(() => el['Комментарий'] ? \"• \" + el['Комментарий'] : \"\")()}</span></span>\n            } else if (el['Баллы'] === 0 && el['Опыт'] && el['Опыт'] > 0) {\n                return <span>{el['Опыт']}&nbsp;опыта {(() => el['Комментарий'] ? \"• \" + el['Комментарий'] : \"\")()}</span>\n\n            } else if (!el['Опыт']) {\n                return <span><span>{el['Баллы']}</span><span className=\"star\">{star('#000000')}</span>{(() => el['Комментарий'] ? \"• \" + el['Комментарий'] : \"\")()}</span>\n\n            }\n        }\n\n        const renderImage = el => {\n            if (!el['Макет']) return\n            return <Avatar mode=\"image\" size={64} src={el['Макет'][0]['url']}></Avatar>\n        }\n\n\n        let renderModalData = (el) => {\n            return <Youtube videoId={el['Разбор']} className=\"video\" opts={{\n                playerVars: {\n                    start: el['feedback_marker'],\n                    autoplay: 1\n                }\n            }} />\n        }\n\n        let renderBottom = (el) => {\n            if (!el['Баллы'] && !el['Опыт']) return\n            let stars = el['Баллы'] ? (<Tag><span>{el['Баллы']}</span>★</Tag>) : null\n            let exp = el['Опыт'] ? (<Tag><span>{el['Опыт']}</span> XP</Tag>) : null\n            return <div style={{ display: 'flex', marginTop: 'var(--wrapper-padding)' }}>{stars}{exp}</div>\n        }\n\n        return history\n            .filter(el=>el['Макет'])\n            .map((el, i) => {\n                return <RichCell\n                    key={i}\n                    multiline\n                    // expandable={el['Разбор'] ? true : false}\n                    onClick={() => el['Разбор'] ? this.props.openModal({ type: 'modal', data: { body: renderModalData(el) } }) : null}\n                    caption={this.parseDate(el['Датавремя'])}\n                    actions={(() => el['Разбор'] ? <><Button>Смотреть разбор</Button></> : <></>)()}\n                    before={renderImage(el)}\n                    className={(() => !el['Оценка'] ? \"cell_nonactive\" : \"historyCell\")()}\n                    bottom={renderBottom(el)}\n                >{renderTitle(el)}</RichCell>\n            })\n    }\n\n    render() {\n\n        let { history, isLoading } = this.state\n\n        if(isLoading) return <div>…</div>\n        if (history.length === 0) return <Div>Вы пока не участвовали ни в одной активности.</Div>\n        return <>\n            <Group className=\"history\">\n                {(() => {\n                    \n                    return <List> {this.parseHistory(history)} </List>\n                })()}\n\n            </Group>\n        </>\n\n\n    }\n\n}","import React from 'react'\nimport { Group, List, Cell, Spinner, } from '@vkontakte/vkui';\nimport { iModalData, iUser, iAchieve } from '../../interfaces';\nimport { AIR_CONFIG } from '../../config'\nimport Airtable from '../../Airtable';\n\n\nlet base = new Airtable(AIR_CONFIG)\n\n\n\ninterface iAchieveList {\n    user: iUser\n    openModal: (modal: { type: string, data: iModalData }) => void\n    onButtonClick?: (route: string, meta: any) => void\n    fetchAchieves: () => Promise<any[]>\n}\n\nexport default class AchieveList extends React.Component<iAchieveList, any> {\n    _isMounted: boolean = false\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            achieves: [],\n            isLoading: false\n        }\n\n\n    }\n    async componentDidMount() {\n        this._isMounted = true\n        this.setState({ isLoading: true })\n        let achieves = await this.props.fetchAchieves()\n        let proms = achieves.map(achieve => this.fetchRubricHistory(achieve).then((userHistory: any[]) => {\n            achieve.achievedItems = userHistory || []\n            let acivedItem = userHistory.filter(el => el['Ачивка']).find(el => el['Ачивка'][0] === achieve.rec_id)\n            achieve.achieved = acivedItem ? true : false\n            achieve.acivedItem = acivedItem\n            return achieve\n        }))\n\n        let result = await Promise.all(proms);\n\n        if (this._isMounted) {\n            this.setState({\n                achieves: result,\n                isLoading: false\n            })\n        }\n\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n\n    async fetchRubricHistory(record: iAchieve) {\n        let filter = `AND(\n            {VK-ID}=${this.props.user.id}, \n            NOT({Ачивка}=BLANK())\n            )`;\n        return base.list('Начисления: разминки', {\n            filterByFormula: filter\n        })\n            .catch(e => {\n                console.error(e)\n                return []\n            })\n    }\n\n\n\n\n    render() {\n\n        let { openModal } = this.props\n        let { achieves, isLoading } = this.state\n\n\n        const cells = (arr: iAchieve[]) => {\n            return arr.map((achive, i) => {\n\n                return <Cell\n                    key={i}\n                    multiline\n                    onClick={() => openModal({\n                        type: 'modal',\n                        data: {\n                            title: achive['Name'],\n                            desc: achive['Описание'],\n                        }\n                    })}\n                    data-to='lesson'\n\n                    before={<div className=\"roundContainer\">\n                        <div className=\"round\">\n                            <label className=\"roundCircle\" style={achive['achieved'] ? { backgroundColor: 'var(--color-spacegray)' } : { backgroundColor: '#fff' }}></label>\n                        </div>\n                    </div>}\n\n                    description={achive.acivedItem && achive.acivedItem['Опыт'] > 0 ? `+ ${achive.acivedItem['Опыт']} опыта` : ``}\n                >\n                    <div style={(achive['achieved']) ? { textDecoration: 'line-through', color: 'var(--color-spacegray)' } : {}}>{`${achive['Name']}`}</div>\n                </Cell >\n            })\n        }\n\n        if (isLoading) return <div style={{ marginTop: '40px' }}><Spinner size=\"medium\" /></div>\n\n        return <Group separator=\"hide\" style={{ marginBottom: 'calc(var(--wrapper-padding-2x) * 3)' }}>\n            <List >\n                {cells(achieves.filter(el => !el['achieved']).slice(0, 4))}\n                {cells(achieves.filter(el => el['achieved']))}\n            </List>\n        </Group>\n    }\n}","import React from 'react'\nimport { Group, List, Cell, Avatar, Spinner } from '@vkontakte/vkui'\nimport Icon24BrowserForward from '@vkontakte/icons/dist/24/browser_forward'\n\ninterface iRubricsList {\n    go: (route: string, meta?: any) => void\n    fetchRubrics: () => Promise<any[]>\n}\n\n\nexport default class RubricsList extends React.Component<iRubricsList, any> {\n\n    _isMounted: boolean = false\n\n    state = {\n        rubrics: [],\n        isLoading: false\n    }\n\n    async componentDidMount() {\n\n        this._isMounted = true\n        this.setState({ isLoading: true })\n\n        const rubrics = await this.props.fetchRubrics()\n\n        if (this._isMounted) {\n            this.setState({ rubrics: rubrics, isLoading: false })\n        }\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n\n    render() {\n        let { go } = this.props\n\n        if(this.state.isLoading) return <div style={{ marginTop: '40px' }}><Spinner size=\"medium\" /></div>\n\n        return <Group title=\"Рубрики\" >\n            <List>\n                {this.state.rubrics.map((rubric, i) => {\n                    let cover = () => rubric['Обложка'] ? <Avatar mode=\"image\" src={rubric['Обложка'][0]['url']} size={72} /> : \"\"\n                    return (<Cell\n                        key={i}\n                        before={cover()}\n                        multiline\n                        description={rubric['desc']}\n                        asideContent={<Icon24BrowserForward fill=\"var(--icon_secondary)\" />}\n                        onClick={(e) => go('rubric', rubric)}\n                    >{rubric['Название']}</Cell>)\n                })}\n            </List>\n        </Group>\n    }\n}","import React from 'react';\nimport './LevelBubble.css'\n\nexport default class LevelBubble extends React.Component<any, any> {\n    render() {\n\n        let {\n            action\n        } = this.props\n\n        return (\n            <div className=\"levelBubble\" onClick={action ? action : null}>{this.props.children}</div>\n        )\n    }\n}","import React from 'react'\nimport { Avatar, Progress } from '@vkontakte/vkui'\nimport LevelBubble from './LevelBubble/LevelBubble'\nimport { iUser } from '../../interfaces'\nimport { star } from '../../icons'\n\ninterface iUserComponent {\n    user: iUser,\n    fetchLevelsData: () => Promise<any>\n}\n\nexport default class UserComponent extends React.Component<iUserComponent, any>{\n    _isMounted: boolean = false\n\n    state = {\n        isLoading: false,\n        levels: null\n    }\n\n    async componentDidMount() {\n        this._isMounted = true\n        this.setState({ isLoading: true })\n\n        let levels = await this.props.fetchLevelsData();\n\n        if (this._isMounted) {\n            this.setState({ levels: levels, isLoading: false })\n        }\n    }\n\n\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n\n\n    render() {\n        const { user } = this.props\n        let { levels } = this.state\n       \n\n        const renderLevelData = () => {\n            if (!levels) return\n            return <>{`${levels.need_exp_to_level_up} XP до ${+user['Уровень'] + 1} уровня`}\n                <Progress value={(levels.levelExperience * 100) / (levels.next_level[\"Требует опыта\"] - levels.current_level['Требует опыта'])} style={{ width: '100%' }} />\n            </>\n        }\n        return <div className=\"amountContainer\">\n            <Avatar src={user.photo_200} size={72}></Avatar>\n            <div className=\"amountWrapper\">\n                <span className=\"amount\">{user['Баланс']}</span>\n                <span className=\"star\">{star('#ffffff')}</span>\n                <br />\n                {renderLevelData()}\n                <LevelBubble className=\"levelBubble\">{Math.round(user['Уровень'])}</LevelBubble>\n            </div>\n        </div>\n    }\n}","import React from 'react'\nimport { Card, Div } from '@vkontakte/vkui'\nimport * as removeMd from 'remove-markdown';\nimport Tag from '../../../components/Tag/Tag';\n\nexport default class TaskCard extends React.Component<any, any> {\n    render() {\n\n        let { lesson, go } = this.props\n\n        const renderSkills = (lesson: any) => {\n            if (!lesson.event_type || !lesson.event_type['Skills']) return\n            return lesson.event_type['Skills']\n                .sort((a, b) => a - b)\n                .map((skill, i) => <Tag key={i}>{skill}</Tag>)\n        }\n\n        return <Card\n            style={{ height: 'fit-content' }}\n            size='l'\n            mode='shadow'\n            onClick={() => go('lesson', { lessonID: lesson.recID, lesson: lesson, backTo: 'profile' })}\n        >\n            <Div style={{}} ><strong>{lesson.event_type['Name']}</strong>\n                <p>{removeMd(lesson.event_type['Описание'].slice(0, 200) + '…')}</p>\n                {renderSkills(lesson)}\n                <br />\n                <small>От {lesson['Опыт']} XP</small>\n            </Div>\n        </Card>\n    }\n}","import React from 'react'\nimport { Group, Header, CardScroll, Card, CardGrid, Div } from '@vkontakte/vkui'\nimport TaskCard from './TaskCard/TaskCard'\n\n\ninterface iTasksComponent {\n    fetchEvents: () => Promise<any[]>\n    fetchTasks: () => Promise<any[]>\n    go: (route: string, meta?: any) => void\n}\n\nexport default class TasksComponent extends React.Component<iTasksComponent, any> {\n    _isMounted: boolean = false\n\n    state = {\n        tasks: [],\n        events: [],\n        isLoading: false\n    }\n\n    async componentDidMount() {\n\n        this._isMounted = true\n        this.setState({ isLoading: true })\n\n        const tasks = await this.props.fetchTasks()\n        const events = await this.props.fetchEvents()\n\n        if (this._isMounted) {\n            this.setState({ tasks: tasks, events: events, isLoading: false })\n        }\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n\n    render() {\n\n        const eventsCards = (events, go) => {\n\n            const background = (event: any) => {\n                if (!event.event_type || !event.event_type['Обложка']) return 'linear-gradient(200.98deg, #485563 -13.11%, #29323C 75.28%)'\n                return `url(${event.event_type['Обложка'][0]['url']})`\n            }\n\n            return events.map(event => {\n                return <Card\n                    size=\"s\"\n                    style={{ color: 'white', height: '128px', background: background(event) }}\n                    key={event['rec_id']}\n                    onClick={() => go('lesson', { lessonID: event.recID, lesson: event, backTo: 'profile' })}\n                >\n                    <div style={{ width: '110px', padding: '12px' }} >\n                        <strong>{event['Рубрика']}</strong>\n                        <div style={{ lineHeight: '120%' }}>{event['Name']}</div>\n                        <div className=\"lesson_date\">\n                            {event['Дата']},<br />{event['Время']} МСК\n                        </div>\n                    </div>\n                </Card >\n            })\n\n        }\n\n\n        const cardList = (tasks, go) => {\n            return <Group\n                header={this.state.isLoading ? <div className=\"loader\" style={{ marginLeft: 'var(--wrapper-padding)', height: 'var(--wrapper-padding-2x)', width: '150px', }}></div> : <Header mode=\"secondary\">Разминки</Header>}\n                style={{ marginBottom: 'calc(var(--wrapper-padding-2x) * 3)', marginTop: 'var(--wrapper-padding)' }}\n                separator=\"hide\"\n            >\n                <CardGrid>\n                    {(() => {\n                        if (this.state.isLoading)\n                            return [1, 2].map((el, i) => <Card key={i} size='m' className='loader' ><Div style={{ width: 144, height: 120 }}></Div></Card>)\n\n                        if (tasks && tasks.length !== 0)\n                            return tasks.map(lesson => (<TaskCard key={lesson.recID} lesson={lesson} go={go} />))\n                    })()}\n                </CardGrid>\n            </Group>\n\n        }\n\n        let { events, tasks } = this.state\n        let { go } = this.props\n\n        return <>\n            <Group header={<Header mode=\"secondary\">Встречи</Header>} separator='hide'>\n                <CardScroll>\n                    {eventsCards(events, go)}\n                </CardScroll>\n            </Group>\n            {cardList(tasks, go)}\n        </>\n\n\n    }\n}","import React from 'react'\n\nimport { Panel, PanelHeader, platform, ANDROID } from '@vkontakte/vkui'\n\nimport \"./Profile.css\"\nimport Cover from '../../components/Cover/Cover'\nimport { logo } from '../../icons'\n\nimport ProfileTabs from './ProfileTabs'\nimport HistoryList from '../../components/HistoryList'\nimport AchievesList from './AchievesList'\nimport { iModalData, iUser } from '../../interfaces'\n\nimport { iApi } from '../../Api'\n\nimport RubricsList from './RubricsList'\nimport UserComponent from './UserComponent'\nimport TasksComponent from './TasksComponent'\n\ninterface iProfilePage {\n    id: string,\n    go: (route: string, meta?: any) => void\n    user: iUser\n    snackbar: any\n    fetchHistory: () => Promise<any[]>\n    openModal: (modal: { type: string, data?: iModalData }) => void\n    api: iApi\n    fetchEvents: () => Promise<any[]>\n    fetchRubrics: () => Promise<any[]>\n    fetchAchieves: () => Promise<any[]>\n    fetchLevelsData: () => Promise<any>\n    fetchTasks: () => Promise<any[]>\n}\n\n\n\nclass Profile extends React.Component<iProfilePage, any> {\n\n    \n\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            tabs: ['rubrics', 'history', 'achieves', 'tasks'],\n            selectedTab: 'tasks',\n            events: [],\n            isLoading: false\n        }\n    }\n\n    render() {\n\n        let {\n            user,\n            go,\n            snackbar,\n            fetchAchieves,\n            fetchRubrics,\n            fetchLevelsData,\n            fetchTasks,\n            fetchEvents,\n            openModal\n        } = this.props\n\n\n\n        return (\n\n            <Panel id='profile'  >\n                <PanelHeader></PanelHeader>\n                <Cover >\n                    <div className=\"logo-wrapper\">\n                        <div className=\"logo\" style={{ top: (platform() === ANDROID) ? '25px' : '37px' }}>{logo}</div>\n                        <a href=\"https://vk.com/@lean.school-s-chego-nachat-obuchenie-v-line\" target=\"_blank\" className=\"logo-help\">С чего начать</a>\n                    </div>\n\n                    <UserComponent user={user} fetchLevelsData={fetchLevelsData} />\n                </Cover>\n\n                <ProfileTabs tabs={this.state.tabs} selectedTab={this.state.selectedTab} onClickHandler={(tabName) => this.setState({ selectedTab: tabName })} />\n\n                {(() => {\n                    if (this.state.selectedTab === 'tasks') return (<TasksComponent fetchEvents={fetchEvents} fetchTasks={fetchTasks} go={go}/>)\n                    if (this.state.selectedTab === 'achieves') return <AchievesList fetchAchieves={fetchAchieves} openModal={openModal} user={user} onButtonClick={go} />\n                    if (this.state.selectedTab === 'rubrics') return <RubricsList fetchRubrics={fetchRubrics} go={this.props.go} />\n                    if (this.state.selectedTab === 'history') return <HistoryList fetchHistory={this.props.fetchHistory} openModal={this.props.openModal} />\n                })()}\n\n                {snackbar}\n\n\n            </Panel>\n\n        )\n    }\n}\n\n\n\nexport default Profile","import React from 'react';\nimport { Panel, Div, FixedLayout, Button, Link, ANDROID, platform, Group, Header, Cell, Spinner } from '@vkontakte/vkui';\nimport \"./EventDetailComponent.css\";\nimport ReactMarkdown from 'react-markdown';\nimport bridge from '@vkontakte/vk-bridge';\nimport Navbar from '../../components/Navbar/Navbar';\nimport { parseQueryString, formatLessonTime } from '../../Helpers';\nimport { iUser, iRubric, iModalData } from '../../interfaces';\nimport { AIR_CONFIG } from '../../config'\nimport Airtable from '../../Airtable';\nimport * as Typograf from 'typograf';\nimport { iApi } from '../../Api';\nimport YouTube from 'react-youtube';\nconst tp = new Typograf({ locale: ['ru', 'en-US'] });\n\nlet base = new Airtable(AIR_CONFIG)\n\n\nconst osname = platform();\n\ninterface iEventDetailComponent {\n\tid: string\n\tlessonID: string\n\tuser: iUser\n\tonBackClick: (route: string, meta?: any) => void\n\tbackTo?: string\n\tfetchPurchases: ()=> Promise<any[]>\n\trubric?: iRubric\n\tlesson?: any\n\topenModal: (modal: { type: string, data?: iModalData }) => void\n\tapi: iApi\n}\n\n\nclass EventDetailComponent extends React.Component<iEventDetailComponent, any> {\n\n\t_isMounted: boolean\n\tstate = {\n\t\tmessage: null,\n\t\tlesson: null,\n\t\trubric: null,\n\t\tselectedFile: null,\n\t\thasAccess: null,\n\t\tgood: null,\n\t\tpurchases: []\n\t}\n\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis._isMounted = false;\n\t}\n\n\tasync componentDidMount() {\n\t\tawait this.fetchData()\n\t\tif (this.state.lesson) this.checkPermissions();\n\t\t(osname === ANDROID) ? bridge.send(\"VKWebAppSetViewSettings\", { \"status_bar_style\": \"dark\", \"action_bar_color\": \"#ffffff\" }) : bridge.send(\"VKWebAppSetViewSettings\", { \"status_bar_style\": \"dark\", });\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis._isMounted = false;\n\t}\n\n\tasync fetchData() {\n\t\tthis._isMounted = true;\n\t\tlet { lesson, rubric } = this.props\n\t\t//если передан объект lesson, то используем его, если нет, то делаем фетч\n\t\tlet les = lesson ? lesson : await this.fetchLessonData();\n\t\tif (!les) return this.props.onBackClick('profile')\n\t\t//если передан объект rubric, то используем его, если нет, то делаем фетч\n\t\tlet rub = rubric ? rubric : await this.fetchRubric(les['RubricID']);\n\t\tlet good = rub['Товар'] ? await this.props.api.goods.getByID(rub['Товар'][0]) : null\n\n\t\tlet purchases = await this.props.fetchPurchases();\n\n\t\tif (this._isMounted) this.setState({ rubric: rub, lesson: les, good: good, purchases: purchases })\n\t}\n\n\n\tasync fetchLessonData() {\n\t\t\n\t\tlet lesson = await this.props.api.events.list({filterByFormula: `{recID}=\"${this.props.lessonID}\"`}, true).then(res=>res[0])\n\t\t\n\t\tif (!lesson) return null\n\t\treturn formatLessonTime(lesson)\n\t}\n\n\n\tsendData = async () => {\n\t\t// let data = this.state.lesson;\n\t\tlet { rubric, purchases, lesson } = this.state\n\t\tlet { user,  } = this.props\n\n\t\tlet purchase;\n\t\tif (rubric && rubric['Товар'] && purchases)\n\t\t\tpurchase = purchases.find(el => el['Рубрика'].find(rubricID => rubricID === rubric.recID))\n\t\t\n\t\tawait this.props.api.accruals.create({\n\t\t\tuser_rec_id: user.rec_id || user.recID,\n\t\t\tcomment: 'Запись на тренировку',\n\t\t\tevent_rec_id: lesson.recID,\n\t\t\tamount: 0,\n\t\t\tpurchase_ids: purchase ? [purchase.rec_id] : []\n\t\t}).then(res => {\n\t\t\tconst queryParams = parseQueryString(window.location.search);\n\t\t\tif (queryParams && queryParams.vk_are_notifications_enabled === \"0\") bridge.send(\"VKWebAppAllowNotifications\", {});\n\t\t\tthis.setState({\n\t\t\t\tmessage: (() => {\n\t\t\t\t\tif (!res[0]) throw new Error('error when create accural')\n\t\t\t\t\treturn <div>Вы записаны <Link onClick={() => this.undo(res[0].recID)}>Отменить</Link></div>\n\t\t\t\t})()\n\t\t\t})\n\n\n\t\t}).catch(_ => this.setState({\n\t\t\tmessage: (() => {\n\t\t\t\treturn <div>Что-то сломалось. Напишите мне на <a href=\"mailto:reva@leandesign.pro\">reva@leandesign.pro</a></div>\n\t\t\t})()\n\t\t}))\n\n\t}\n\n\tundo = (recID: string) => { this.props.api.accruals.delete([recID]).then(res => this.setState({ message: null })).catch(console.log) }\n\n\n\tcheckPermissions = () => {\n\t\tlet { lesson, rubric } = this.state\n\t\tlet purchases = this.state.purchases || [];\n\t\tlet find = lesson['Участники'].find(el => +el === this.props.user['VK-ID'])\n\t\tlet res = { hasAccess: true, message: null }\n\n\t\tif (purchases.length === 0 && rubric['Товар']) res.hasAccess = false\n\t\tif (lesson['Осталось'] === 0) res.message = 'Не осталось мест'\n\t\tif (this.props.user && !lesson['Ссылка'] && find) res = { hasAccess: false, message: \"Ты в участниках\" }\n\t\tif (this.props.user && lesson['Ссылка'] && find) res = { hasAccess: false, message: '👍🏻 Работа сдана' }\n\n\t\tthis.setState(res)\n\n\t}\n\n\tfetchRubric = (rubricID: string) => base.find(rubricID, 'Рубрики')\n\n\n\n\trender() {\n\n\t\tlet {\n\t\t\tonBackClick,\n\t\t\tid,\n\t\t\tuser,\n\t\t\tbackTo,\n\t\t\topenModal\n\t\t} = this.props\n\n\t\tlet { lesson, rubric } = this.state\n\n\n\t\tlet renderInstruction = () => ( <YouTube videoId={lesson.event_type['instruction_video_id']} className=\"video\" />)\n\n\t\tlet renderPaymentBlock = () => {\n\t\t\tif (!this.state.good) return null\n\n\t\t\tlet good = this.state.good;\n\t\t\treturn <>\n\t\t\t\t<Header mode=\"primary\">{good['Название']}</Header>\n\t\t\t\t<Div style={{ padding: '0 var(--wrapper-padding-2x) var(--wrapper-padding-2x) var(--wrapper-padding-2x)' }}>\n\t\t\t\t\t<ReactMarkdown source={good['Description']} />\n\t\t\t\t\t<Button size=\"l\" stretched={true} href={`https://app.leandesign.pro/p/pay?user_id=${user[\"VK-ID\"]}&force=true`} target=\"_blank\">Подписаться</Button>\n\t\t\t\t</Div>\n\n\t\t\t</>\n\n\t\t}\n\n\t\tlet renderInstrButton = () => {\n\t\t\treturn lesson.event_type['instruction_video_id']\n\t\t\t\t? <Button\n\t\t\t\t\tsize={'m'}\n\t\t\t\t\tstretched={true}\n\t\t\t\t\tonClick={() => openModal(!this.state.hasAccess ? { type: 'paid', data: { body: renderPaymentBlock() } } : { type: 'modal', data: { title: '', body: renderInstruction() } })}\n\t\t\t\t>\n\t\t\t\t\tТеория\n\t\t\t\t\t</Button> : null\n\t\t}\n\n\t\tlet renderDetails = () => {\n\t\t\tlet result = []\n\t\t\tif (lesson.event_type && lesson.event_type['Разбор'])\n\t\t\t\tresult.push(<Cell key={1} description={lesson.event_type['Разбор']}>Разбор</Cell>)\n\n\n\t\t\tif (lesson['Опыт'] && lesson['Опыт'] !== 0)\n\t\t\t\tresult.push(<Cell key={2} description={`Холодно — ${lesson['Опыт']}, Тепло — ${lesson['Опыт'] * 2}, Горячо — ${lesson['Опыт'] * 3}`} multiline={true}>Получите опыта</Cell>)\n\n\t\t\treturn result\n\t\t}\n\n\t\tif (!lesson || !user) return <div id={id} style={{ marginTop: '40px' }}><Spinner size=\"medium\" /></div>\n\n\n\t\tlet renderBottomBar = () => {\n\t\t\tif (this.state.message) return <div>{this.state.message}</div>\n\t\t\tlet label = lesson['Ссылка'] ? 'К выполнению' : 'Я буду'\n\t\t\tif (this.state.hasAccess === false) return <Button size={'l'} onClick={() => openModal({ type: 'paid', data: { title: 'Подписка', body: renderPaymentBlock() } })} stretched={true}>{label}</Button>\n\t\t\treturn lesson['Ссылка'] ? <Button size={'l'} href={lesson['Ссылка']} target=\"_blank\" stretched={true}>{label}</Button> : <Button size={'l'} stretched={true} onClick={() => this.sendData()}>{label}</Button>\n\t\t}\n\n\t\tlet renderDetailsBlock = () => {\n\t\t\tlet details = renderDetails();\n\t\t\tif (details.length === 0) return\n\t\t\treturn <Group separator=\"hide\" style={{ backgroundColor: \"var(--color-gray)\", paddingBottom: '80px' }}>\n\t\t\t\t<Header mode=\"secondary\">Детали</Header>\n\t\t\t\t{details}\n\t\t\t</Group>\n\t\t}\n\n\t\tlet description = lesson.event_type&&lesson.event_type['Описание'] ? lesson.event_type['Описание'] : lesson['Описание']\n\n\t\treturn (\n\n\t\t\t<Panel id={id}>\n\t\t\t\t<Navbar go={() => onBackClick(backTo ? backTo : 'profile', rubric)} buttonColor=\"black\"></Navbar>\n\t\t\t\t<Header mode=\"primary\">{lesson.event_type['Name']}</Header>\n\n\t\t\t\t<Div className=\"lesson-body\">\n\t\t\t\t\t<ReactMarkdown source={tp.execute(description)} />\n\t\t\t\t\t{renderInstrButton()}\n\t\t\t\t</Div>\n\n\n\t\t\t\t{renderDetailsBlock()}\n\n\t\t\t\t<FixedLayout vertical=\"bottom\" className=\"bottomBar\" >{renderBottomBar()}</FixedLayout>\n\t\t\t</Panel>\n\n\t\t);\n\t}\n}\n\n\n\nexport default EventDetailComponent;","//поля помеченные = null берутся из airtable. Остальные появлятся в коде.\nimport { iLevel } from './Api'\n\nexport class iUser {\n\tid: number\n\tfirst_name: string\n\tlast_name: string\n\tlevelExperience?: number\n\t'Имя': string = null\n\t'VK-ID': number = null\n\t'Баланс': number = null\n\t'Опыт': number = null\n\t'Уровень': number = null\n\t'Email'?: string = null\n\t'visited_events': string[] = null\n\trecID: string\n\trec_id?: string\n\tphoto_200?: string\n\tnext_level?: iLevel\n\tcurrent_level?: iLevel\n\tneed_exp_to_level_up?: number\n}\n\nexport interface iModalData {\n\ttitle?: string\n\tdesc?: string\n\tonButtonClickHandler?: () => void\n\tbuttonLabel?: string\n\tbody?: any\n}\n\n\nexport class iAchieve {\n\trecID: string\n\t'Кол-во работ': number = null\n\t'RubricID': string = null\n\t'Name': string = null\n\t'Описание': string = null\n\t'Оценка': number = null\n\t'Таблица': string = null\n\t'Короткое описание': string = null\n\t'Опубликовано': boolean = null\n\tFilter?: string = null\n\tachievedItems?: any[]\n\tacivedItem?: any\n\t\n}\n\nexport class iRubric {\n\trecID: string;\n\tdesc: string;\n\t'Название': string = null;\n\t'Таблица': string = null;\n\t'Обложка': any[] = null;\n\t'Описание': string = null;\n\t'Итог опыт': number = null;\n\t'Тренировки': string[] = null;\n}\n\n\nexport class iHistoryItem {\n\trecID: string\n\t'VK-ID': number = null\n\t'Датавремя': string = null\n\t'Профиль'?: string[] = null\n\t'Рубрика': string[] = null\n\t'Комментарий': string = null\n\t'Баллы': number = null\n\t'Средняя': number = null\n\t'Макет': any[] = null\n\t'Опыт': number = null\n}","import React from 'react'\nimport { ModalCard } from '@vkontakte/vkui'\nimport { iModalData } from '../interfaces'\n\ninterface iModalCardComponent {\n    id: string\n    onClose: (foo: any) => void\n    modalData: iModalData\n}\n\nexport default class ModalCardComponent extends React.Component<iModalCardComponent, any> {\n    render() {\n        let {modalData} = this.props\n        return <ModalCard\n            id={this.props.id}\n            onClose={() => this.props.onClose(null)}\n            header={modalData ? modalData.title : ''}\n            caption={modalData ? modalData.desc : ''}\n            actions={modalData && modalData.onButtonClickHandler ? [{\n                title: modalData ? modalData.buttonLabel : '',\n                mode: 'primary', action: () => { \n                    this.props.onClose(null)\n                     return modalData ? modalData.onButtonClickHandler() : null\n                }\n            }] : []}\n        >\n            {modalData ? modalData.body : ''}\n        </ModalCard>\n    }\n}","import { AirtableConnector, iAirtableListOptions } from './Airtable';\n// import * as admin from 'firebase-admin';\n\n\n// Events //\n\nexport interface iEventType {\n    level?: number,\n    isAvailableToUser?: (user: any) => boolean\n}\n\nexport interface iEventFileds {\n    event_type_id?: string\n}\n\nexport interface iEvent extends iEventFileds {\n    isAvailableToUser?: (user: any) => boolean\n}\n\nexport interface iEventCreate {\n    title?: string\n}\n\nexport interface iEventUpdate {\n    title?: string\n}\n\ntype eventFields = 'Name' | 'Уровень' | 'Тренировки' | 'Описание' | 'Рубрика' | 'День' | 'Опубликовано' | 'RubricID' | 'Опыт рубрики' | 'Навыки' | 'key' | 'Skills' | 'Уровень' | 'level_no' | 'recID'\n\ninterface iEventListOptions extends iAirtableListOptions {\n    fields?: eventFields[]\n}\n\nclass EventTypes {\n    private listName = 'Тип тренировки';\n\n    constructor(private base: AirtableConnector) { }\n\n    list = async (params?: iEventListOptions): Promise<EventType[]> => this.base.list(this.listName, params)\n        .then(res => res.map(el => new EventType(el)))\n\n    getByID = async (id: string): Promise<EventType> => this.base.getByID(id, this.listName)\n    // create = async (data: iEventCreate[]) => this.base.create(data).then(res => res.map(el => new Event(el)))\n    // update = async (data: iEventUpdate[]) => this.base.update(data).then(res => res.map(el => new Event(el)))\n};\n\n// class Users {\n//     private listName = 'Участники';\n//     constructor(private base: AirtableConnector, firebase: FBConnector) { }\n//     list = async (filter?: iEventFileds): Promise<EventType[]> => this.base.list(this.listName, { filter: filter })\n//         .then(res => res.map(el => new EventType(el)))\n// }\n\n\n\n\nclass Events {\n    private listName = 'Тренировки';\n    constructor(private base: AirtableConnector) { }\n\n    list = async (params?: iAirtableListOptions, include_event_type?: boolean): Promise<Event[]> => this.base.list(this.listName, params).then(res => {\n        if (!include_event_type) return res\n\n        let proms = res.map(el => new EventTypes(this.base).getByID(el.event_type_id).then(event_type => {\n            el.event_type = new EventType(event_type)\n            return el\n        }))\n        return Promise.all(proms).then(res => res.map(el => new Event(el)))\n    })\n\n    getByID = async (id: string): Promise<Event> => this.base.getByID(id, this.listName)\n};\n\ntype iLevelFields = 'Number'\n    | 'Требует опыта'\n    | 'Товары'\n    | 'Тип тренировки'\n    | 'Навыки'\n    | 'recID'\n\ninterface iLevelListOption extends iAirtableListOptions {\n    fields?: iLevelFields[]\n}\n\nclass Levels {\n    private listName = 'Уровни дизайнера';\n    constructor(private base: AirtableConnector) { }\n    list = async (params?: iLevelListOption): Promise<Level[]> => this.base.list(this.listName, params)\n        .then(res => res.map(el => new Level(el)))\n}\n\ntype iGoodsFields = 'Название'\n    | 'Баллы'\n    | 'Стоимость'\n    | 'Для подписчиков'\n    | 'Опубликовано'\n    | 'Description'\n    | 'Обложка'\n    | 'Кол-во тренировок'\n    | 'Рубрики'\n    | 'Покупки'\n    | 'Срок годности'\n    | 'RecID'\n    | 'Уровни дизайнера'\n\n\nexport interface iGoodsListOption extends iAirtableListOptions {\n    fields?: iGoodsFields[]\n}\n\n\ntype iUsersFields = 'Имя'\n    | 'VK Profile'\n    | 'VK-ID'\n    | 'Опыт'\n    | 'Покупки'\n    | 'Начисления: разминки'\n    | 'recID'\n    | 'Активные покупки'\n    | 'Баланс'\n    | 'Уровень'\n    | 'visited_events'\n\n\nexport interface iUsersListOption extends iAirtableListOptions {\n    fields?: iUsersFields[]\n}\n\nclass Goods {\n    private listName = 'Товары';\n    constructor(private base: AirtableConnector) { }\n    list = async (params?: iGoodsListOption): Promise<Good[]> => {\n        if (params && !params.view) params.view = 'Line_App.Active'\n        if (!params) params = { view: 'Line_App.Active' }\n        return this.base.list(this.listName, params).then(res => res.map(el => new Good(el)))\n    }\n\n    getByID = async (id: string): Promise<Goods> => this.base.getByID(id, this.listName)\n\n}\n\n\nclass User {\n    'Имя': any\n    'VK Profile': any\n    'VK-ID': any\n    'Опыт': any\n    'Покупки': any\n    'Начисления: разминки': any\n    'recID': any\n    'Активные покупки': any\n    'Баланс': any\n    'Уровень': any\n    'visited_events': any\n\n    constructor(data: any) {\n        if (data) Object.keys(data).map(key => this[key] = data[key])\n    }\n}\n\n\ninterface iInitUser {\n    'vk_id': number\n    'name'?: string\n}\n\ninterface iUserCreateOptions {\n    'vk_id': number\n    'name'?: string\n    'email'?: string\n}\n\nclass Users {\n    private listName = 'Участники';\n    constructor(private base: AirtableConnector) { }\n\n    initUser(data: iInitUser): Promise<User | undefined> {\n        return this.getByID({ vk_id: data.vk_id }).then(res => {\n            if (res) return res\n            if (!res) return this.create(data).then(resp => new User(resp))\n                .then(async user => {\n                    await new Accruals(this.base).create({\n                        amount: 1,\n                        user_rec_id: user.recID,\n                        comment: 'Первое начисление'\n                    })\n                    return user\n                })\n            return\n        })\n    }\n\n    create(params: iUserCreateOptions): Promise<User | undefined> {\n        return this.base.create([{\n            fields: {\n                'Имя': params.name || '',\n                'VK-ID': params.vk_id,\n                'Email': params.email || ''\n            }\n        }], this.listName).then(resp => new User(resp))\n    }\n\n    getByID(params: { vk_id?: number, rec_id?: string }): Promise<User | undefined> {\n        if (!params.vk_id && !params.rec_id) throw new Error('vk_id or rec_id needed')\n        let proms = params.rec_id ? this.base.getByID(params.rec_id, this.listName) : this.base.list(this.listName, {\n            filter: { 'VK-ID': `=${params.vk_id}` }\n        }).then(res=>res[0])\n        return proms.then((res: any) => {\n            if (res) return new User(res)\n            return\n        })\n    }\n    list = async (params?: iUsersListOption): Promise<User[]> => {\n        return this.base.list(this.listName, params).then(res => res.map(el => new User(el)))\n    }\n\n}\n\n\nclass Accrual {\n    'Имя': any\n    'Датавремя': any\n    'Опыт': any\n    'Профиль': any\n    'Баллы': any\n    'VK-ID': any\n    'Рубрика': any\n    'Ачивка': any\n    'Комментарий': any\n    'Ссылка на пост': any\n    'Опыт рубрики': any\n    'Оценка': any\n    'Макет': any\n    'Покупки': any\n    'Тренировка': any\n    'День': any\n    'Спринт': any\n    'Сезон': any\n    'RubricID': any\n    'Коэффициент повышения опыта': any\n    'ID тренировки': any\n    'Тип тренировки': any\n    'Оценки': any\n    'Средняя': any\n    'recID': any\n    'event_type_id': any\n\n\n    constructor(data: any) {\n        if (data) Object.keys(data).map(key => this[key] = data[key])\n    }\n}\n\ntype iAccrualsFields = 'Имя' |\n    'Датавремя' |\n    'Опыт' |\n    'Профиль' |\n    'Баллы' |\n    'VK-ID' |\n    'Рубрика' |\n    'Ачивка' |\n    'Комментарий' |\n    'Ссылка на пост' |\n    'Опыт рубрики' |\n    'Оценка' |\n    'Макет' |\n    'Покупки' |\n    'Тренировка' |\n    'День' |\n    'Спринт' |\n    'Сезон' |\n    'RubricID' |\n    'Коэффициент повышения опыта' |\n    'ID тренировки' |\n    'Тип тренировки' |\n    'Оценки' |\n    'Средняя' |\n    'event_type_id';\n\n\nexport interface iAccrualsListOptions {\n    user_rec_id?: string\n    vk_id?: number\n    last_month?: boolean\n    max_records?: number\n}\n\ninterface iAccrualCreateOptions {\n    user_rec_id: string\n    comment?: string\n    amount: number\n    file_urls?: string[]\n    event_rec_id?: string\n    purchase_ids?: string[]\n}\n\nclass Accruals {\n    private listName = 'Начисления: разминки';\n    constructor(private base: AirtableConnector) { }\n\n    getByID = (rec_id: string): Promise<Accrual | undefined> => this.base.getByID(rec_id, this.listName).then(res => new Accrual(res))\n\n    list = async (params?: iAccrualsListOptions): Promise<Accrual[]> => {\n        let opt: iAirtableListOptions = { sort: [{ field: 'Датавремя', direction: 'desc' }] }\n        if (params && params.max_records) opt.maxRecords = params.max_records\n        if (params && params.vk_id) opt.filter = { 'VK-ID': `=${params.vk_id}` }\n        if (params && params.last_month) opt.view = 'Последний месяц'\n        if (params && params.user_rec_id) opt.filter = { 'user_rec_id': `=${params.user_rec_id}` }\n        return this.base.list(this.listName, opt).then(res => res.map(el => new Accrual(el)))\n    }\n\n    create = async (params: iAccrualCreateOptions): Promise<Accrual[]> => {\n        return this.base.create([{\n            fields: {\n                'Датавремя': new Date().toISOString(),\n                'Баллы': params.amount,\n                'Макет': params.file_urls ? params.file_urls : [],\n                'Тренировка': params.event_rec_id ? [params.event_rec_id] : [],\n                'Профиль': [params.user_rec_id],\n                'Комментарий': params.comment ? params.comment : '',\n                'Покупки': params.purchase_ids ? params.purchase_ids : []\n            }\n        }], this.listName)\n    }\n\n    delete = async (rec_ids: string[]) => this.base.delete(rec_ids, this.listName)\n\n}\n\n\nclass Good {\n    'Название': any\n    'Баллы': any\n    'Стоимость': any\n    'Для подписчиков': any\n    'Опубликовано': any\n    'Description': any\n    'Обложка': any\n    'Кол-во тренировок': any\n    'Рубрики': any\n    'Покупки': any\n    'Срок годности': any\n    'RecID': any\n    'Уровни дизайнера': any\n\n    constructor(data: any) {\n        if (data) Object.keys(data).map(key => this[key] = data[key])\n    }\n}\n\nexport interface iLevel {\n    'Number'?: any\n    'Требует опыта'?: any\n    'Товары'?: any\n    'Тип тренировки'?: any\n    'Навыки'?: any\n    'recID'?: any\n}\n\nclass Level implements iLevel {\n    'Number': any\n    'Требует опыта': any\n    'Товары': any\n    'Тип тренировки': any\n    'Навыки': any\n    'recID': any\n    constructor(data: iLevel) {\n        if (data) Object.keys(data).map(key => this[key] = data[key])\n    }\n}\n\n\n\nclass EventType {\n    'level_no': any\n    'Уровень': any\n    'Name': any\n    'Тренировки': any\n    'Описание': any\n    'Рубрика': any\n    'День': any\n    'Опубликовано': any\n    'RubricID': any\n    'Опыт рубрики': any\n    'Навыки': any\n    'key': any\n    'Статус': any\n    'Skills': any\n    'recID': any\n    event_type_id?: string\n    constructor(data: iEventType) {\n        if (data) Object.keys(data).map(key => this[key] = data[key])\n    }\n    isAvailableToUser = (user: any) => user.level >= this.level_no\n}\n\nclass Event implements iEvent {\n    constructor(data: iEventType) {\n        if (data) Object.keys(data).map(key => this[key] = data[key])\n    }\n\n    // isAvailableToUser = (user: any) => user.level >= this.level\n}\n\n\ninterface iApiConfig {\n    airtable_conf: { apikey: string, base: string },\n    firebase_service_account?: any\n}\n\nexport interface iApi {\n    event_types: EventTypes\n    events: Events\n    levels: Levels\n    goods: Goods\n    users: Users\n    accruals: Accruals\n}\n\nexport default class Api {\n\n    constructor(private params: iApiConfig) { }\n\n    event_types = new EventTypes(new AirtableConnector(this.params.airtable_conf))\n    events = new Events(new AirtableConnector(this.params.airtable_conf))\n    levels = new Levels(new AirtableConnector(this.params.airtable_conf))\n    goods = new Goods(new AirtableConnector(this.params.airtable_conf))\n    users = new Users(new AirtableConnector(this.params.airtable_conf))\n    accruals = new Accruals(new AirtableConnector(this.params.airtable_conf))\n}\n\n\n// export class FBConnector {\n\n// \tprotected db\n\n// \tconstructor(serviceAccount: any) {\n\n//         admin.initializeApp({\n//             credential: admin.credential.cert(serviceAccount)\n//         });\n\n//         this.db = admin.firestore();\n// \t}\n\n// \tgetByID(rec_id: string, listName: string): Promise<any> {\n// \t\treturn this.db.collection(listName).doc(rec_id).get()\n// \t\t\t.then((doc) => {\n// \t\t\t\tif (!doc.exists) {\n// \t\t\t\t\tconsole.log('No such document!');\n// \t\t\t\t} else {\n// \t\t\t\t\treturn doc.data()\n// \t\t\t\t}\n// \t\t\t})\n// \t\t\t.catch((err) => {\n// \t\t\t\tconsole.log('Error getting documents', err);\n// \t\t\t});\n// \t}\n\n// \tget(listName: string, filter?: any) {\n// \t\tlet filt = filter ? this.generateFilterString(filter) : null\n// \t\tlet request = filt ? this.db.collection(listName).where(filt.key, filt.condition, filt.value) : this.db.collection(listName)\n\n// \t\treturn request.get().then(snapshot => {\n// \t\t\tif (snapshot.empty) {\n// \t\t\t\tconsole.log('No matching documents.');\n// \t\t\t\treturn [];\n// \t\t\t}\n// \t\t\tlet data: any[] = []\n\n// \t\t\tsnapshot.forEach(doc => {\n// \t\t\t\tlet obj = doc.data();\n// \t\t\t\tobj.id = doc.id\n// \t\t\t\tdata.push(obj)\n// \t\t\t});\n// \t\t\treturn data\n// \t\t})\n// \t}\n\n// \tcreate(dataArray: [{ id?: string, fields: any }], listName: string): Promise<any> {\n// \t\tlet proms = dataArray.map(data => data.id ? this.db.collection(listName).doc(data.id).set(data.fields) : this.db.collection(listName).add(data.fields))\n\n// \t\treturn Promise.all(proms)\n// \t}\n\n// \tasync update(params: { id: string, fields: any }[], listName: string) {\n\n// \t\t// var result = [];\n// \t\t// var arrays = [],\n// \t\t\t// size = 10\n\n// \t\t// while (params.length > 0) arrays.push(params.splice(0, size))\n// \t\t// for (const bunch of arrays) {\n// \t\t\tlet proms = params.map(field => this.db.collection(listName).doc(field.id).update(field.fields))\n// \t\t\t// await \n// \t\t\t// await setTimeout(() => { }, 2000)\n// \t\t// }\n// \t\treturn Promise.all(proms)\n// \t}\n\n// \tprotected generateFilterString = (fileds: any): { key: string, value: any, condition: string } => {\n\n// \t\tlet keys = Object.keys(fileds)\n\n// \t\tlet arr: any[] = []\n// \t\tkeys.map(key => {\n// \t\t\tlet reg = /^([><=!]*)(.*)/gs\n// \t\t\tlet value = fileds[key].replace(reg, '$2');\n// \t\t\tlet condition = fileds[key].replace(reg, '$1')\n// \t\t\tarr.push({\n// \t\t\t\tkey: key,\n// \t\t\t\tvalue: value,\n// \t\t\t\tcondition: condition\n// \t\t\t})\n// \t\t})\n\n// \t\treturn arr[0]\n// \t}\n// }","import React from 'react';\nimport bridge from '@vkontakte/vk-bridge';\nimport { platform, ANDROID, View, ModalRoot, ModalPage, ModalPageHeader, PanelHeaderButton } from '@vkontakte/vkui';\nimport * as Typograf from 'typograf';\nimport { air_schema } from 'lean-air';\nimport splash from './img/splash.GIF';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport \"./main.css\";\nimport Rubric from './Panels/Rubric/Rubric';\nimport Profile from './Panels/Profile/Profile';\nimport EventDetailComponent from './Panels/EventDetailComponent/EventDetailComponent';\nimport { iModalData, iUser, iRubric, iAchieve } from './interfaces';\nimport ModalCardComponent from './components/ModalCardComponent';\nimport { parseQueryString } from './Helpers';\nimport Airtable from './Airtable'\nimport { AIR_CONFIG } from './config'\nimport Api from './Api'\nimport { iGoodsListOption } from './Api'\nimport { formatLessonTime } from './Helpers'\n\nlet base = new Airtable(AIR_CONFIG)\nlet api = new Api({ airtable_conf: AIR_CONFIG })\n\nconst tp = new Typograf({ locale: ['ru', 'en-US'] });\nconst splashLoader = <div style={{ width: '100%', height: '100%', backgroundColor: '#770EFD' }}><img src={splash} style={{ width: '100%', height: '100%' }} alt=\"loading...\" /></div>;\n\nconst osname = platform();\n\n\ninterface iAppState {\n\tuser: iUser\n\tactiveView: string\n\tactiveModal: string\n\tmodalData: iModalData\n\tauthToken: string\n\tisLoading: boolean\n\thistory: any[]\n\trubrics: iRubric[]\n\tmeta: any\n\tsnackbar: any\n\tpurchases: any[]\n\tachieves: any[]\n\tevents: any[]\n\tlessons: any[]\n}\n\nclass App extends React.Component<any, iAppState> {\n\n\t_isMounted: boolean\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tuser: null,\n\t\t\tactiveView: null,\n\t\t\tactiveModal: null,\n\t\t\tmodalData: null,\n\t\t\tauthToken: null,\n\t\t\tisLoading: false,\n\t\t\thistory: [],\n\t\t\trubrics: [],\n\t\t\tmeta: {},\n\t\t\tsnackbar: null,\n\t\t\tpurchases: null,\n\t\t\tachieves: null,\n\t\t\tevents: null,\n\t\t\tlessons: []\n\t\t};\n\n\t\tthis.setActiveModal = this.setActiveModal.bind(this);\n\t\tthis.fetchHistoryData = this.fetchHistoryData.bind(this);\n\t\tthis.fetchUserPurchases = this.fetchUserPurchases.bind(this);\n\t\tthis.fetchTasksByUser = this.fetchTasksByUser.bind(this);\n\t\tthis.fetchEvents = this.fetchEvents.bind(this);\n\t\tthis.fetchLevelsData = this.fetchLevelsData.bind(this);\n\t\tthis._isMounted = false\n\t}\n\n\n\n\tsetActiveModal(modal: { type: string, data?: iModalData }) {\n\t\tlet activeModal = modal ? modal.type : null\n\t\tlet modalData = modal ? modal.data : null\n\t\tthis.setState({\n\t\t\tactiveModal,\n\t\t\tmodalData\n\t\t})\n\t}\n\n\n\n\tasync componentDidMount() {\n\n\t\tthis.setState({ isLoading: true })\n\n\t\tbridge.subscribe(async (e: any) => {\n\t\t\tswitch (e.detail.type) {\n\t\t\t\tcase 'VKWebAppGetUserInfoResult':\n\t\t\t\t\tthis._isMounted = true;\n\t\t\t\t\t// e.detail.data.id = 86211886\n\t\t\t\t\tlet userData = await this.fetchUserData(e.detail.data);\n\n\t\t\t\t\tif (!userData) return\n\n\t\t\t\t\tif (this._isMounted)\n\t\t\t\t\t\tthis.setState({ user: Object.assign(e.detail.data, userData) })\n\n\t\t\t\t\tconst hashParams = parseQueryString(window.location.hash);\n\n\t\t\t\t\tif (hashParams.r === 'lesson' && hashParams.id)\n\t\t\t\t\t\tthis.setState({ activeView: 'lesson', meta: { lessonID: hashParams.id }, isLoading: false })\n\t\t\t\t\telse\n\t\t\t\t\t\tthis.setState({ activeView: 'profile', isLoading: false })\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'VKWebAppAccessTokenReceived':\n\t\t\t\t\tthis.setState({ authToken: e.detail.data.access_token });\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'VKWebAppViewRestore':\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'VKWebAppAllowNotificationsResult':\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\n\t\t\t}\n\t\t});\n\n\t\t(osname === ANDROID) ? bridge.send(\"VKWebAppSetViewSettings\", { \"status_bar_style\": \"light\", \"action_bar_color\": \"#000000\" }) : bridge.send(\"VKWebAppSetViewSettings\", { \"status_bar_style\": \"light\", });\n\t\tbridge.send('VKWebAppGetUserInfo', {});\n\n\t}\n\n\n\tcomponentWillUnmount() {\n\t\tthis._isMounted = false;\n\t}\n\n\n\tfetchUserData = (user: iUser): Promise<any> => api.users.initUser({\n\t\tvk_id: user.id, name: `${user.first_name} ${user.last_name}`,\n\t})\n\n\n\tasync fetchLevelsData(): Promise<any> {\n\t\tlet userData = this.state.user\n\t\treturn api.levels.list({\n\t\t\tfilterByFormula: `OR({Number}=${userData['Уровень'] + 1}, {Number}=${userData['Уровень']})`\n\t\t}).then(res => {\n\t\t\tlet next_level = res.find(el => +el.Number === +userData['Уровень'] + 1)\n\t\t\tlet current_level = res.find(el => +el.Number === +userData['Уровень'])\n\t\t\treturn {\n\t\t\t\tnext_level: next_level,\n\t\t\t\tcurrent_level: current_level,\n\t\t\t\tneed_exp_to_level_up: next_level[\"Требует опыта\"] - current_level['Требует опыта'],\n\t\t\t\tlevelExperience: userData['Опыт'] - current_level['Требует опыта']\n\t\t\t}\n\t\t})\n\t}\n\n\n\tasync fetchUserPurchases(): Promise<any> {\n\t\treturn base.list(air_schema.t_purchases, { filterByFormula: `AND({${air_schema.f_purchases.vk_id}}=${this.state.user['VK-ID']}, NOT({${air_schema.f_purchases.status}}=\"Архив\"))` })\n\t}\n\n\n\n\tasync fetchRubricsData(): Promise<iRubric[]> {\n\t\tlet fields = new iRubric();\n\n\t\tlet rubrics = await base.list('Рубрики', {\n\t\t\tfilterByFormula: '{Опубликовано} = TRUE()',\n\t\t\tfields: Object.keys(fields).filter(key => fields[key] !== undefined)\n\n\t\t}).catch(e => []) as iRubric[]\n\n\t\treturn rubrics.map((obj: iRubric) => {\n\t\t\tif (obj['Описание']) {\n\t\t\t\tobj['Описание'] = tp.execute(obj['Описание']);\n\t\t\t\tobj.desc = obj['Описание'].replace(/[*#|]/gs, '').slice(0, 60)\n\t\t\t\tif (obj.desc.length < obj['Описание'].length) obj.desc = obj.desc + \"…\"\n\t\t\t}\n\n\t\t\treturn obj\n\t\t}) as iRubric[];\n\n\t}\n\n\n\tfetchAchieves() {\n\t\tlet fields = new iAchieve();\n\t\treturn base.list('Ачивки', {\n\t\t\tsort: [{ field: 'Кол-во работ', direction: 'asc' }, { field: 'Сложность', direction: 'asc' }],\n\t\t\tfilterByFormula: 'NOT({Опубликовано}=BLANK())',\n\t\t\tfields: Object.keys(fields).filter(key => fields[key] !== undefined)\n\t\t}).catch(e => [])\n\t}\n\n\tasync fetchHistoryData(): Promise<any[]> {\n\t\treturn api.accruals.list({\n\t\t\tmax_records: 20,\n\t\t\tvk_id: this.state.user[\"VK-ID\"],\n\t\t})\n\t}\n\n\tasync fetchTasksByUser() {\n\t\tlet user = this.state.user\n\t\tlet filter = user.visited_events ? `AND(${user.visited_events.map(el => `NOT({recID}=\"${el}\")`).join(',')})` : null\n\t\treturn api.events.list({\n\t\t\tfilterByFormula: filter,\n\t\t\tview: 'На главной в Линии',\n\t\t\tmaxRecords: 10\n\t\t}, true).then((res: any[]) => {\n\t\t\tif (res.length === 0) return res\n\t\t\treturn res.filter(\n\t\t\t\t(thing, i, arr) => arr.findIndex(t => t.event_type_id === thing.event_type_id) === i\n\t\t\t);\n\n\t\t})\n\n\t}\n\n\tsetLocation = (route: string) => {\n\t\tif (route !== 'profile') {\n\t\t\tbridge.send('VKWebAppSetLocation', { location: route });\n\t\t} else {\n\t\t\tbridge.send('VKWebAppSetLocation', { location: '' });\n\t\t}\n\t}\n\n\n\tgo = (route: string, meta?: any) => {\n\t\tif (meta) this.setState({ meta: meta })\n\t\tthis.setState({ activeView: route })\n\t\treturn\n\t};\n\n\tonRubricCellClickHandler = (route: string, meta: any) => {\n\t\tthis.setState({ activeView: route })\n\t\tthis.setState({ meta: meta })\n\t}\n\n\tfetchEvents = async () => {\n\t\treturn api.events.list({ view: 'Ближайшие', filterByFormula: `NOT({Дата}=BLANK())` }, true).then(res => res.filter(el => el['Рубрика'] !== 'Design Exp').map(el => formatLessonTime(el)))\n\t}\n\tfetchGoods = async (params?: iGoodsListOption) => api.goods.list(params)\n\n\n\n\trender() {\n\n\t\tconst {\n\t\t\tuser,\n\t\t\tisLoading,\n\t\t\tmeta\n\t\t} = this.state;\n\n\t\tif (!user || isLoading) return splashLoader;\n\n\n\n\t\tconst modal =\n\t\t\t(<ModalRoot\n\t\t\t\tactiveModal={this.state.activeModal}\n\t\t\t\tonClose={() => this.setState({ activeModal: null })}\n\t\t\t>\n\n\t\t\t\t<ModalCardComponent\n\t\t\t\t\tid='modal'\n\t\t\t\t\tonClose={() => this.setActiveModal(null)}\n\t\t\t\t\tmodalData={this.state.modalData} />\n\n\t\t\t\t<ModalPage\n\t\t\t\t\tid='paid'\n\t\t\t\t\tonClose={() => this.setActiveModal(null)}\n\t\t\t\t\theader={\n\t\t\t\t\t\t<ModalPageHeader\n\t\t\t\t\t\t\tright={<PanelHeaderButton onClick={() => this.setActiveModal(null)}>Закрыть</PanelHeaderButton>}\n\t\t\t\t\t\t></ModalPageHeader>\n\t\t\t\t\t}\n\t\t\t\t\tsettlingHeight={100}\n\t\t\t\t>\n\t\t\t\t\t{this.state.modalData ? this.state.modalData.body : null}\n\n\t\t\t\t</ModalPage>\n\t\t\t</ModalRoot>)\n\n\t\treturn (\n\t\t\t<View id=\"main\" activePanel={this.state.activeView} modal={modal}>\n\t\t\t\t<Profile\n\t\t\t\t\tid=\"profile\"\n\t\t\t\t\tsnackbar={this.state.snackbar}\n\t\t\t\t\tfetchRubrics={this.fetchRubricsData}\n\t\t\t\t\tgo={this.go}\n\t\t\t\t\tuser={user}\n\t\t\t\t\tfetchHistory={this.fetchHistoryData}\n\t\t\t\t\tfetchAchieves={this.fetchAchieves}\n\t\t\t\t\tfetchLevelsData={this.fetchLevelsData}\n\t\t\t\t\topenModal={(modal) => this.setActiveModal(modal)}\n\t\t\t\t\tfetchTasks={this.fetchTasksByUser}\n\t\t\t\t\tapi={api}\n\t\t\t\t\tfetchEvents={this.fetchEvents}\n\t\t\t\t/>\n\t\t\t\t<Rubric\n\t\t\t\t\tid='rubric'\n\t\t\t\t\tuser={user}\n\t\t\t\t\trubric={meta}\n\t\t\t\t\tgo={this.go}\n\t\t\t\t\trubricCellClickHandler={this.go}\n\t\t\t\t\tgetLessons={this.fetchEvents}\n\t\t\t\t/>\n\t\t\t\t<EventDetailComponent\n\t\t\t\t\tid=\"lesson\"\n\t\t\t\t\tonBackClick={this.go}\n\t\t\t\t\tlessonID={meta.lessonID}\n\t\t\t\t\tlesson={meta.lesson}\n\t\t\t\t\tuser={user}\n\t\t\t\t\tfetchPurchases={this.fetchUserPurchases}\n\t\t\t\t\tbackTo={meta.backTo}\n\t\t\t\t\topenModal={(modal) => this.setActiveModal(modal)}\n\t\t\t\t\tapi={api}\n\t\t\t\t/>\n\t\t\t</View >\n\t\t)\n\t}\n}\n\n\nexport default App;\n\n","import 'core-js/features/map';\nimport 'core-js/features/set';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport bridge from '@vkontakte/vk-bridge';\nimport App from './App';\n// import registerServiceWorker from './sw';\n\n// Init VK  Mini App\nbridge.send('VKWebAppInit');\n\n\n// Если вы хотите, чтобы ваше веб-приложение работало в оффлайне и загружалось быстрее,\n// расскомментируйте строку с registerServiceWorker();\n// Но не забывайте, что на данный момент у технологии есть достаточно подводных камней\n// Подробнее про сервис воркеры можно почитать тут — https://vk.cc/8MHpmT\n// registerServiceWorker();\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}